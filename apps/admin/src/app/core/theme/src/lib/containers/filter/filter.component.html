<div class="filter--header">
  <div class="close--wrapper">
    <p class="filter">Filter</p>
  </div>
  <div class="reset-wrapper">
    <img
      src="assets/images/white-undo.png"
      (click)="resetFilter()"
      pTooltip="Reset"
      tooltipPosition="bottom"
      class="p-button-secondary"
      alt="undo"
    />
    <img
      class="close-sidebar-icon"
      pTooltip="Close"
      tooltipPosition="bottom"
      aria-hidden="true"
      (click)="closePopup()"
      src="assets/svg/close-sidebar.svg"
    />
  </div>
</div>
<form class="filter--form" [formGroup]="filterForm">
  <hospitality-bot-tab-group
    class="tabs"
    [selectedIndex]="selectedTabIndex"
    [view]="'vertical'"
    [listItems]="tabFilterItems"
    (selectedTabChange)="onSelectedTabFilterChange($event)"
  >
  </hospitality-bot-tab-group>
  <div class="tab-content" [ngSwitch]="selectedTab">
    <ng-container *ngSwitchCase="filterTabs.PROPERTY">
      <div formGroupName="property">
        <div class="tab-head">
          Property
        </div>
        <div class="tab-head__padding">
          <div class="hotel-branch">
            Choose Brand or Hotel
          </div>
          <div>
            <div>
              <hospitality-bot-select
                class="half-width"
                controlName="brandName"
                label="Select Brand"
                [options]="entityList"
              ></hospitality-bot-select>
            </div>
            <div class="property">
              <hospitality-bot-select
                class="half-width"
                controlName="entityName"
                label="Select Property"
                [options]="brandList"
                (itemSelection)="handleHotelChange($event.value)"
              ></hospitality-bot-select>
            </div>
          </div>
        </div>
      </div>
    </ng-container>

    <ng-container *ngSwitchCase="filterTabs.OUTLETS">
      <div formGroupName="outlets" *ngIf="outletFG">
        <div class="tab-head">
          Outlet
        </div>
        <div class="tab-head__padding">
          <div class="hotel-branch">
            Select Outlet
          </div>
          <div class="checkbox--wrapper" *ngFor="let outlet of outlets">
            <hospitality-bot-checkbox
              *ngIf="outletFG.controls[outlet.id]"
              [label]="outlet.name"
              [controlName]="outlet.id"
              (change)="onOutletSelect($event, outlet)"
            ></hospitality-bot-checkbox>
          </div>
        </div>
      </div>
    </ng-container>

    <ng-container *ngSwitchCase="filterTabs.GUEST">
      <div formGroupName="guest">
        <div class="tab-head">
          Guest
        </div>
        <div class="tab-head__padding">
          <div formGroupName="guestCategory">
            <p class="guest-title">Select Guest Category</p>
            <div class="checkbox--wrapper">
              <hospitality-bot-checkbox
                label="Repeat Guest"
                controlName="isRepeatedGuest"
              ></hospitality-bot-checkbox>
              <hospitality-bot-checkbox
                label="New Guest"
                controlName="isNewGuest"
              ></hospitality-bot-checkbox>
            </div>
          </div>
          <div formGroupName="guestType">
            <p class="guest-title">Select Guest Type</p>
            <div class="checkbox--wrapper">
              <hospitality-bot-checkbox
                label="VIP"
                controlName="isVip"
              ></hospitality-bot-checkbox>
              <hospitality-bot-checkbox
                label="Membership"
                controlName="isMembership"
              ></hospitality-bot-checkbox>
              <hospitality-bot-checkbox
                label="General"
                controlName="isGeneral"
              ></hospitality-bot-checkbox>
            </div>
          </div>
        </div>
      </div>
    </ng-container>
    <button
      [disabled]="isDisabled || isTokenLoading"
      type="button"
      (click)="applyFilter()"
      class="apply-button"
    >
      Apply
    </button>
  </div>
</form>
