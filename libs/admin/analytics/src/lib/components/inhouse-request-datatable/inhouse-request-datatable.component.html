<div class="inhouse-wrap">
  <div class="inhouse-wrap__close" (click)="closeModal()"></div>
  <p-table
    #dt
    [styleClass]="tableConfig.styleClass"
    [resizableColumns]="isResizableColumns"
    [autoLayout]="isAutoLayout"
    [loading]="loading"
    [columns]="cols"
    [value]="values"
    [paginator]="isPaginaton"
    [rows]="rowsPerPage"
    [showCurrentPageReport]="showCurrentPageReport"
    [rowsPerPageOptions]="rowsPerPageOptions"
    currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
    [(first)]="first"
    [totalRecords]="totalRecords"
    [filterDelay]="0"
    [selectionMode]="selectionMode"
    [(selection)]="selectedRows"
    (onRowSelect)="onRowSelect($event)"
    (onRowUnselect)="onRowUnselect($event)"
    (sortFunction)="customSort($event)"
    [customSort]="isCustomSort"
  >
    <ng-template pTemplate="caption">
      <div class="caption__wrapper">
        <form [formGroup]="tableFG">
          <div class="caption__wrapper--tabmenu">
            <div class="header">
              <!-- <div class="header--text"> -->
              <div>
                <p class="heading">{{ tableName }}</p>
              </div>
              <div class="requestDataWrapper">
                <div class="options">
                  <div *ngIf="isActionButtons" class="icons">
                    <img src="assets/svg/Download.svg" class="svg" />
                    <img src="assets/svg/google-docs.svg" class="svg" />
                    <img src="assets/svg/card.svg" class="svg" />
                  </div>
                  <div *ngIf="isActionButtons" class="seperator"></div>
                  <div
                    formGroupName="documentActions"
                    class="dropdown--wrapper"
                  >
                    <p-dropdown
                      class="export"
                      [options]="documentActionTypes"
                      formControlName="documentActionType"
                    >
                      <ng-template
                        let-documentActionItem
                        pTemplate="selectedItem"
                      >
                        <img src="assets/svg/Export.svg" />
                        <span class="requestDataActionLabel">{{
                          documentActionItem.label
                        }}</span>
                      </ng-template>
                    </p-dropdown>
                    <div class="divider"></div>
                    <p-dropdown
                      class="export"
                      [options]="documentTypes"
                      formControlName="documentType"
                    >
                      <ng-template
                        let-documentTypeItem
                        pTemplate="selectedItem"
                      >
                        <img src="assets/svg/CSV.svg" />
                        <span class="requestDataActionLabel">{{
                          documentTypeItem.label
                        }}</span>
                      </ng-template>
                    </p-dropdown>
                    <button class="go" (click)="onDocumentActions()">
                      <mat-icon class="material-icons" matSuffix>east</mat-icon>
                    </button>
                  </div>
                </div>
              </div>
              <!-- <p class="selected">2 record(s) are selected</p> -->
            </div>
            <div *ngIf="isTabFilters">
              <hospitality-bot-tab-group
                [listItems]="tabFilterItems"
                [selectedIndex]="tabFilterIdx"
                (selectedTabChange)="onSelectedTabFilterChange($event)"
              ></hospitality-bot-tab-group>
            </div>
          </div>
          <div
            *ngIf="tabFilterItems[tabFilterIdx].chips.length"
            class="caption__wrapper--buttons"
          >
            <!-- <button class="filter">
                All
              </button> -->
            <div class="button__wrapper">
              <mat-chip-list
                multiple
                #chipList
                aria-label="Quick Reply selection"
                formControlName="quickReplyActionFilters"
              >
                <mat-chip
                  *ngFor="
                    let quickReplyType of tabFilterItems[tabFilterIdx].chips;
                    let quickReplyTypeIdx = index
                  "
                  selectable="true"
                  [ngClass]="{
                    'chipSelected status-selected-default':
                      quickReplyType.isSelected,
                    'status-opacity-pending status-text-pending':
                      quickReplyType.type == 'pending',
                    'status-opacity-initiated status-text-initiated':
                      quickReplyType.type == 'initiated',
                    'status-opacity-success status-text-success':
                      quickReplyType.type == 'completed',
                    'status-opacity-reject status-text-reject':
                      quickReplyType.type == 'failed',
                    'status-default': quickReplyType.type == '',
                    'status-selected-pending':
                      quickReplyType.type == 'pending' &&
                      quickReplyType.isSelected,
                    'status-selected-initiated':
                      quickReplyType.type == 'initiated' &&
                      quickReplyType.isSelected,
                    'status-selected-completed':
                      quickReplyType.type == 'completed' &&
                      quickReplyType.isSelected,
                    'status-selected-reject':
                      quickReplyType.type == 'failed' &&
                      quickReplyType.isSelected
                  }"
                  [selected]="isQuickReplyFilterSelected(quickReplyType)"
                  (click)="
                    toggleQuickReplyFilter(quickReplyTypeIdx, quickReplyType)
                  "
                >
                  {{ quickReplyType.label }}
                  <span *ngIf="quickReplyType.value != 'ALL'"> (</span
                  >{{ quickReplyType.total
                  }}<span *ngIf="quickReplyType.value != 'ALL'">)</span>
                </mat-chip>
              </mat-chip-list>
              <!-- <img src="assets/svg/Filter-Icon.svg" /> -->
            </div>
          </div>
        </form>
      </div>
    </ng-template>

    <ng-template pTemplate="emptymessage">
      <p class="no-data-found">No data available in table</p>
    </ng-template>

    <ng-template pTemplate="header" let-columns>
      <tr>
        <th class="requestDataTableHead" pResizableColumn>
          <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
        </th>
        <th
          class="table-data-head"
          pResizableColumn
          [pSortableColumn]="col.field"
          *ngFor="let col of columns"
        >
          <div>
            <p class="table-header-text">{{ col.header }}</p>
            <p-sortIcon *ngIf="col.isSort" [field]="col.field"></p-sortIcon>
          </div>
        </th>
      </tr>

      <tr class="table-search-head">
        <th class="table-search-head"></th>
        <th class="table-search-head">
          <input
            pInputText
            type="text"
            (input)="
              onFilterTypeTextChange($event.target.value, 'rooms.roomNumber')
            "
            class="p-column-filter"
          />
        </th>
        <th class="table-search-head">
          <input
            pInputText
            type="text"
            (input)="
              onFilterTypeTextChange($event.target.value, 'rooms.roomNumber')
            "
            class="p-column-filter"
          />
        </th>
        <th class="table-search-head">
          <input
            pInputText
            type="text"
            (input)="
              onFilterTypeTextChange($event.target.value, 'rooms.roomNumber')
            "
            class="p-column-filter"
          />
        </th>
        <th class="table-search-head">
          <input
            pInputText
            type="text"
            (input)="
              onFilterTypeTextChange($event.target.value, 'rooms.roomNumber')
            "
            class="p-column-filter"
          />
        </th>
        <th class="table-search-head">
          <input
            pInputText
            type="text"
            (input)="
              onFilterTypeTextChange($event.target.value, 'rooms.roomNumber')
            "
            class="p-column-filter"
          />
        </th>
        <th class="table-search-head">
          <input
            pInputText
            type="text"
            (input)="
              onFilterTypeTextChange($event.target.value, 'rooms.roomNumber')
            "
            class="p-column-filter"
          />
        </th>
        <th class="table-search-head">
          <input
            pInputText
            type="text"
            (input)="onFilterTypeTextChange($event.target.value, 'vin')"
            class="p-column-filter"
            disabled="true"
          />
        </th>
      </tr>
    </ng-template>

    <ng-template
      pTemplate="body"
      let-rowData
      let-columns="columns"
      let-rowIndex="rowIndex"
    >
      <!-- [pSelectableRow]="rowData" [pSelectableRowIndex]="rowIndex" -->
      <tr class="data-table-row">
        <td class="table--checkbox">
          <p-tableCheckbox
            [value]="rowData"
            [index]="rowIndex"
            (click)="onCheckboxClicked($event)"
          ></p-tableCheckbox>
        </td>
        <td>
          <p>{{ rowData.itemCode }}</p>
          <p>{{ rowData.priority }}</p>
          <p>{{ rowData.quantity }}</p>
        </td>
        <td>
          <p>{{ rowData.confirmationNumber }}</p>
          <p>{{ rowData.rooms[0].roomNumber }} - {{ rowData.rooms[0].type }}</p>
          <p>{{ rowData.quantity }}</p>
        </td>
        <td>
          <p>{{ rowData.guestDetails.primaryGuest.getFullName() }}</p>
        </td>
        <td>
          <p>{{ rowData.guestDetails.primaryGuest.phoneNumber }}</p>
          <p>{{ rowData.guestDetails.primaryGuest.email }}</p>
        </td>
        <td>
          <p>{{ rowData.itemName }}</p>
          <p>{{ rowData.remarks }}</p>
          <div class="row-data-action">
            <div>{{ rowData.action }}</div>
            <div>JD :- {{ rowData.jobDuration }}min</div>
          </div>
        </td>
        <td><div class="emptyCell">&mdash;</div></td>
        <td>
          <mat-select
            class="form-elements"
            placeholder=""
            [value]="rowData.action"
          >
            <mat-option value="Closed">Closed</mat-option>
            <mat-option value="Immediate">Immediate</mat-option>
            <mat-option value="Timeout">Timeout</mat-option>
          </mat-select>
        </td>
      </tr>
    </ng-template>

    <!-- *********************************FOOTER******************************* -->
    <ng-template pTemplate="summary">
      <p-paginator
        #paginator
        [rows]="rowsPerPage"
        [totalRecords]="totalRecords"
        [rowsPerPageOptions]="rowsPerPageOptions"
        (onPageChange)="paginate($event)"
      ></p-paginator>
    </ng-template>
  </p-table>
</div>
