<div class="container">
  <div class="create_Assets">
    <mat-icon
      (click)="redirectToAssets()"
      class="material-icons"
      style="cursor: pointer;"
      matSuffix
      >keyboard_backspace
    </mat-icon>

    <p>
      <ng-container *ngIf="assetId; else addAsset">
        Edit Asset
      </ng-container>
      <ng-template #addAsset>
        Create Asset
      </ng-template>
    </p>
  </div>

  <div class="wrapper-form" [formGroup]="assetForm" *ngIf="assetForm">
    <div class="feilds">
      <div class="feild">
        <mat-label class="mat-label">Name:</mat-label>
        <mat-form-field>
          <input matInput formControlName="name" placeholder="Random Image" />
          <mat-error
            *ngIf="
              assetForm.get('name').touched &&
              assetForm.get('name').hasError('required')
            "
          >
            Name is required
          </mat-error>
        </mat-form-field>
      </div>

      <div class="feild">
        <mat-label class="mat-label">Type:</mat-label>
        <mat-form-field>
          <mat-select
            formControlName="type"
            placeholder="Select"
            (selectionChange)="handleAssetTypeChanged($event)"
          >
            <mat-option value="Image">Image</mat-option>
            <mat-option value="Video">Video</mat-option>
          </mat-select>
          <mat-error
            *ngIf="
              assetForm.get('type').touched &&
              assetForm.get('type').hasError('required')
            "
          >
            Type is required
          </mat-error>
        </mat-form-field>
      </div>
    </div>

    <div class="full-width">
      <mat-label class="mat-label">Description:</mat-label>
      <mat-form-field class="description">
        <input
          matInput
          formControlName="description"
          placeholder="Write your description here"
        />
        <mat-error
          *ngIf="
            assetForm.get('description').touched &&
            assetForm.get('description').hasError('required')
          "
        >
          Description is required
        </mat-error>
      </mat-form-field>
    </div>
    <div class="image_container">
      <div class="feilds margin-adjust">
        <div class="upload_image">
          <mat-label class="mat-label"
            ><ng-container
              *ngIf="assetType === 'Image'; then imageLabel; else videoLabel"
            ></ng-container>
            <ng-template #imageLabel>Image:</ng-template>
            <ng-template #videoLabel>Video:</ng-template>
          </mat-label>
        </div>
        <div class="image-button">
          <div class="image">
            <ng-container
              *ngIf="
                assetType === 'Image';
                then imageControl;
                else videoControl
              "
            ></ng-container>
            <ng-template #imageControl
              ><hospitality-bot-upload-file
                [fileUploadData]="fileUploadData"
                [url]="assetImageUrl"
                [isDisable]="false"
                (fileData)="uploadFile($event)"
              >
              </hospitality-bot-upload-file
            ></ng-template>
            <ng-template #videoControl
              ><hospitality-bot-upload-video
                [fileUploadData]="fileUploadData"
                [url]="assetImageUrl"
                [isDisable]="false"
                (fileData)="uploadFile($event)"
              >
              </hospitality-bot-upload-video
            ></ng-template>
          </div>
          <div class="message">Recommended Ratio : 16:9 | 3MB Max Size</div>
        </div>
      </div>
    </div>

    <div class="toggle_wrapper">
      <mat-label class="mat-label">Active :</mat-label>
      <div class="status status--left">Disable</div>
      <mat-slide-toggle formControlName="status"></mat-slide-toggle>
      <div class="status status--right">Enable</div>
    </div>
  </div>

  <div class="button">
    <button
      class="saveButton"
      (click)="createAsset()"
      [ngClass]="{ active: !isSavingasset, disabled: isSavingasset }"
    >
      <i *ngIf="isSavingasset" class="fa fa-spinner fa-spin"></i>
      {{ isSavingasset ? 'Saving' : 'Save' }}
    </button>
  </div>
</div>
