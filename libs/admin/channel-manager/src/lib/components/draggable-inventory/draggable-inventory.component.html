<div class="wrapper">
  <div
    #myBounds
    [ngStyle]="{
      width: noOfColumn * cellSize + 'px',
      height: noOfRow * cellSize + 'px'
    }"
  >
    <ng-container *ngFor="let row of gridRows; let rowIdx = index">
      <ng-container *ngFor="let y of gridColumns; let colIdx = index">
        <div
          class="drag-grid"
          [bounds]="myBounds"
          [rzContainment]="myBounds"
          [inBounds]="true"
          *ngIf="data[row.value] && data[row.value][y]"
          ngDraggable
          ngResizable
          [rzMinWidth]="cellSize / 2"
          [rzGrid]="cellSize / 2"
          [position]="{
            x:
              colIdx * cellSize +
              (data[row.value][y]?.hasPrev ? cellSize / 2 : 0),
            y: rowIdx * cellSize
          }"
          [gridSize]="cellSize / 2"
          [ngStyle]="{
            width:
              cellSize * data[row.value][y]?.cellOccupied -
              (data[row.value][y]?.hasNext ? cellSize / 2 : 0) -
              (data[row.value][y]?.hasPrev ? cellSize / 2 : 0) +
              'px',
            height: cellSize + 'px',
            padding: cellGap + 'px'
          }"
          zIndex="100"
          zIndexMoving="1000"
          [preventDefaultEvent]="true"
          rzHandles="e,w"
          (rzStop)="handleResizing($event)"
          (endOffset)="
            handleDrag($event, {
              rv: row.value,
              cv: y
            })
          "
        >
          <div
            class="cell-data"
            [ngStyle]="{
              height: cellSize - 2 * cellGap + 'px'
            }"
          >
            {{ data[row.value][y]?.content }}
          </div>
        </div>
      </ng-container>
    </ng-container>
  </div>

  <!-- for grid view -->
  <div
    class="grid-container"
    [ngStyle]="{ width: noOfColumn * cellSize + 'px' }"
  >
    <div
      *ngFor="let row of gridRows; let rowIdx = index"
      class="grid-row"
      [id]="'myContainment_' + i"
    >
      <div
        *ngFor="let y of gridColumns; let colIdx = index"
        class="grid-cell"
        [ngStyle]="{
          width: cellSize + 'px',
          height: cellSize + 'px'
        }"
      >
        <div
          [ngDraggable]="false"
          [preventDefaultEvent]="true"
          class="non-drag-grid"
          zIndex="1"
          [ngStyle]="{
            width: cellSize - 2 * cellGap + 'px',
            height: cellSize - 2 * cellGap + 'px',
            margin: cellGap + 'px'
          }"
        ></div>
      </div>
    </div>
  </div>
</div>

<div>
  {{ offset | json }}
</div>

<div>
  {{ position | json }}
</div>

<div>
  {{ size | json }}
</div>

<div>
  {{ gridColumns | json }}
</div>

<div>
  {{ gridRows | json }}
</div>

<div>
  {{ data | json }}
</div>
