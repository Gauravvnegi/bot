<div class="panel-tree">
  <p-accordion class="accordion">
    <p-accordionTab>
      <ng-template pTemplate="header">
        <div
          class="panel-tree__header label-checkbox-wrapper"
          [ngStyle]="parentHeadingStyle"
        >
          <span class="panel-tree__header-checkbox">
            <input
              type="checkbox"
              [name]="'room-' + roomsData.name"
              [id]="roomsData.id"
              (change)="
                onRoomChange($event.target.checked, roomsData.id, 'parent')
              "
              [checked]="roomsData.isSelected"
              (click)="$event.stopPropagation()"
              class="custom-checkbox"
            />
          </span>
          <label
            class="panel-tree__header-label"
            [for]="roomsData.id"
            (click)="$event.stopPropagation()"
          >
            {{ roomsData.name }}
          </label>
        </div>
      </ng-template>
      <ng-template pTemplate="content">
        <div class="panel-tree__content">
          <p-accordion [multiple]="true" class="w-full">
            <p-accordionTab
              *ngFor="
                let variant of roomsData.variants;
                let variantIndex = index
              "
            >
              <ng-template pTemplate="header">
                <div class="varient__heading label-checkbox-wrapper">
                  <span class="panel-tree__header-checkbox">
                    <input
                      type="checkbox"
                      [name]="'variant-' + variant.name"
                      [id]="variant.id"
                      (change)="
                        onRoomChange(
                          $event.target.checked,
                          variant.id,
                          'variant',
                          variantIndex
                        )
                      "
                      [checked]="variant.isSelected"
                      (click)="$event.stopPropagation()"
                      class="custom-checkbox"
                    />
                  </span>

                  <span class="panel-tree__header-checkbox variant-wrapper">
                    <label
                      [for]="variant.id"
                      (click)="$event.stopPropagation()"
                      >{{ variant.name }}</label
                    >

                    <hospitality-bot-menu-button
                      class="channel-heading"
                      [label]="roomsData.variants.length + ' channel'"
                    ></hospitality-bot-menu-button>
                  </span>
                </div>
              </ng-template>
              <ng-template pTemplate="content">
                <label
                  class="channel label-checkbox-wrapper panel-tree__header"
                  *ngFor="
                    let channel of variant.channels;
                    let channelIndex = index
                  "
                  [for]="variant.id + '-' + channel.id"
                  [ngClass]="channel.isSelected ? 'active-channel' : ''"
                >
                  <span class="panel-tree__header-checkbox">
                    <input
                      type="checkbox"
                      [name]="'channel-' + channel.name"
                      class="custom-checkbox"
                      [id]="variant.id + '-' + channel.id"
                      (change)="
                        onRoomChange(
                          $event.target.checked,
                          channel.id,
                          'channel',
                          variantIndex,
                          channelIndex
                        )
                      "
                      [checked]="channel.isSelected"
                    />
                  </span>
                  <span class="panel-tree__header-label">
                    {{ channel.name }}
                  </span>
                </label>
              </ng-template>
            </p-accordionTab>
          </p-accordion>
        </div>
      </ng-template>
    </p-accordionTab>
  </p-accordion>
</div>
