<div class="main-wrapper">
  <hospitality-bot-navigation-header
    heading="Update Inventory"
    [routes]="[{ label: 'Update Inventory', link: './' }]"
    [isStickyTitle]="false"
    [isBack]="false"
  >
    <hospitality-bot-button
      label="Bulk update"
      [link]="'/pages/channel-manager/update-inventory/inventory-bulk-update'"
    ></hospitality-bot-button>
  </hospitality-bot-navigation-header>

  <div class="wrapper" [formGroup]="useForm">
    <div class="left">
      <div class="left__main">
        <div class="main-header main-header__left">
          <hospitality-bot-multi-select
            label="Room Type"
            controlName="roomType"
            [options]="roomTypes"
            [settings]="{ showHeader: false }"
          ></hospitality-bot-multi-select>
          <div class="date-wrapper">
            <hospitality-bot-date
              controlName="date"
              [settings]="{ enableTime: false, dateFormat: 'M dd, yy' }"
            >
            </hospitality-bot-date>
          </div>
        </div>
        <div class="main-section">
          <div class="dynamic-section left-main-cell">
            <span class="text">
              Dynamic Pricing
            </span>
          </div>
          <ng-container
            *ngFor="let roomType of roomTypes; let roomTypeIdx = index"
          >
            <div class="heading-section left-main-cell">
              <div class="left-main-cell__left main-text">
                {{ roomType.label }}
              </div>
              <div class="left-main-cell__right ttp">
                <div class="main-text">
                  Available
                </div>
                <div class="main-text">
                  (Occupancy%)
                </div>
              </div>
            </div>
            <ng-container
              *ngFor="
                let ratePlan of roomType['ratePlans'];
                let ratePlanIdx = index
              "
            >
              <div class="input-content-section left-main-cell">
                <div class="left-main-cell__left">
                  <div class="room-type">
                    <div>{{ ratePlan.type }}</div>
                    <div>({{ ratePlan.label }})</div>
                  </div>
                  <hospitality-bot-menu-button
                    class="channel-btn"
                    label="{{ ratePlan.channels.length + ' Channels' }}"
                    (click)="handleChannelVisibility(roomTypeIdx, ratePlanIdx)"
                  ></hospitality-bot-menu-button>
                </div>
                <div class="left-main-cell__right ltr">
                  Rates
                  <i class="pi pi-angle-down"></i>
                  <i class="pi pi-link"></i>
                </div>
              </div>
              <ng-container *ngIf="ratePlan.isChannelVisible">
                <ng-container *ngFor="let channel of ratePlan['channels']">
                  <div class="input-content-section left-main-cell p-bg">
                    <div class="left-main-cell__left">
                      <div class="channel">
                        <div class="channel-name">{{ channel.label }}</div>
                        <img
                          class="channel-icon"
                          src="assets/svg/tick.svg"
                          alt="check"
                        />
                      </div>
                    </div>
                    <div class="left-main-cell__right ltr w-bg">
                      Rates
                      <i class="pi pi-angle-down"></i>
                      <i class="pi pi-link"></i>
                    </div>
                  </div>
                </ng-container>
              </ng-container>
            </ng-container>
          </ng-container>
        </div>
      </div>
    </div>
    <div class="right">
      <div class="right__main">
        <div class="main-header main-header__right">
          <div class="date-wrapper dates-header">
            <div *ngFor="let date of dates" class="dates-cell cell">
              <div>{{ date.day }}</div>
              <div>{{ date.date }}</div>
            </div>
          </div>
        </div>
        <div class="main-section">
          <div class="data-cell-wrapper">
            <div class="data-cell dynamic-section">
              <div class="cell" *ngFor="let date of dates">
                <p-inputSwitch></p-inputSwitch>
              </div>
            </div>
          </div>
          <ng-container *ngFor="let roomType of roomTypes">
            <div class="data-cell-wrapper">
              <div class="data-cell heading-section">
                <div class="cell" *ngFor="let date of dates">
                  <div class="main-text">9</div>
                  <div class="seconday-text">32%</div>
                </div>
              </div>
            </div>
            <ng-container *ngFor="let ratePlan of roomType['ratePlans']">
              <div class="data-cell-wrapper">
                <div class="data-cell input-content-section">
                  <div class="cell" *ngFor="let date of dates">
                    <hospitality-bot-input
                      controlName="willBeChanged"
                    ></hospitality-bot-input>
                  </div>
                </div>
              </div>
              <ng-container *ngIf="ratePlan.isChannelVisible">
                <ng-container *ngFor="let channel of ratePlan['channels']">
                  <div class="data-cell-wrapper">
                    <div class="data-cell input-content-section">
                      <div class="cell" *ngFor="let date of dates">
                        <hospitality-bot-input
                          controlName="willBeChanged"
                        ></hospitality-bot-input>
                      </div>
                    </div>
                  </div>
                </ng-container>
              </ng-container>
            </ng-container>
          </ng-container>
        </div>
      </div>
    </div>
  </div>
</div>
