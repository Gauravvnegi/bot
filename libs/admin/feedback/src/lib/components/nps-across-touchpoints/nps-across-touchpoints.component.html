<div class="container" [formGroup]="npsFG">
  <div class="title-container">
    <div class="icon">
      <img src="assets/svg/nps-touchpoint.svg" />
    </div>
    <div class="stat-title">NPS Across All Touchpoints</div>
  </div>
  <div class="tab-group">
    <hospitality-bot-tab-group [listItems]="tabFilterItems" [selectedIndex]="tabFilterIdx"
      (selectedTabChange)="onSelectedTabFilterChange($event)"></hospitality-bot-tab-group>
  </div>
  <div class="button__wrapper">
    <mat-chip-list multiple #chipList aria-label="Quick Reply selection" formControlName="quickReplyActionFilters"
      *ngIf="tabFilterItems.length">
      <mat-chip *ngFor="
          let quickReplyType of tabFilterItems[tabFilterIdx].chips;
          let quickReplyTypeIdx = index
        " selectable="true" [selected]="isQuickReplyFilterSelected(quickReplyType)"
        (click)="toggleQuickReplyFilter(quickReplyTypeIdx, quickReplyType)" [ngClass]="{
          'chipSelected status-selected-default':
            quickReplyType.isSelected,
          'status-opacity-initiated status-text-initiated':
            quickReplyType.type == 'initiated',
          'status-selected-initiated':
            quickReplyType.type == 'initiated' &&
            quickReplyType.isSelected
        }">
        {{ quickReplyType.label }}
        <!-- <span *ngIf="quickReplyType.value != 'ALL'"> (</span
			>{{ quickReplyType.total
			}}<span *ngIf="quickReplyType.value != 'ALL'">)</span> -->
      </mat-chip>
    </mat-chip-list>
    <img src="assets/svg/Filter-Icon.svg" />
  </div>

  <!-- Graph container -->
  <div class="progress_data_wrapper" *ngIf="npsProgressData">
    <div class="progress_data_wrapper__graph_pointer_wrapper">
      <div class="pointer">
        <p class="label">100</p>
        <p class="bar">-</p>
      </div>
      <div class="pointer">
        <p class="label">80</p>
        <p class="bar">-</p>
      </div>
      <div class="pointer">
        <p class="label">60</p>
        <p class="bar">-</p>
      </div>
      <div class="pointer">
        <p class="label">40</p>
        <p class="bar">-</p>
      </div>
      <div class="pointer">
        <p class="label">20</p>
        <p class="bar">-</p>
      </div>
      <div class="pointer">
        <p class="label">0</p>
        <p class="bar">-</p>
      </div>
      <div class="pointer">
        <p class="label">-20</p>
        <p class="bar">-</p>
      </div>
      <div class="pointer">
        <p class="label">-40</p>
        <p class="bar">-</p>
      </div>
      <div class="pointer">
        <p class="label">-60</p>
        <p class="bar">-</p>
      </div>
      <div class="pointer">
        <p class="label">-80</p>
        <p class="bar">-</p>
      </div>
      <div class="pointer">
        <p class="label">-100</p>
        <p class="bar">-</p>
      </div>
    </div>

    <div class="progress_data_wrapper__back_bars">
      <div class="seperator"></div>
      <ng-container *ngFor="let data of npsProgressData.values">
        <div class="dotted_seperator"></div>
      </ng-container>
      <div class="horizontal_seperator"></div>
    </div>

    <!-- Progress Bars -->
    <div class="progress_data_wrapper__progress_services_bars_wrapper" *ngIf="npsProgressData.values">
      <ng-container *ngFor="let progress of npsProgressData.values">
        <div class="progress_bar_data" [style.width]="(100 / npsProgressData.values.length) + '%'">
          <div class="progess_bars">
            <div class="bar">
              <div class="progress">
                <div style="background: transparent;"
                  [style.height]="(progress.statistic.score === 0 ? 100-1 : progress.statistic.score > 0 ? (100 - progress.statistic.score) : (progress.statistic.score* (-1))) + '%'">
                </div>
                <div [style.background]="((progress.statistic.score >=0 && progress.statistic.score < 31) || progress.statistic.score < -69) ? '#4BA0F5' : '#3DB76B'"
                  [style.height]="(progress.statistic.score === 0 ? 1 : progress.statistic.score > 0 ? progress.statistic.score : (100 + progress.statistic.score)) + '%'">
                </div>
              </div>
              <div class="progress">
                <div style="background: red;"
                  [style.height]="(progress.statistic.score === 0 ? 1 : progress.statistic.score > 0 ? (100 - progress.statistic.score) : (progress.statistic.score* (-1))) + '%'">
                </div>
                <div style="background: transparent;"
                  [style.height]="(progress.statistic.score === 0 ? 100-1 : progress.statistic.score > 0 ? progress.statistic.score : (100 + progress.statistic.score)) + '%'">
                </div>
              </div>
            </div>
          </div>
          <div class="label">{{ progress.value }}</div>
        </div>
      </ng-container>
    </div>
  </div>
</div>