<div class="wrapper">
  <hospitality-bot-navigation-header
    heading="Preview Invoice"
    [routes]="navRoutes"
  >
    <ng-container *ngIf="!isLoading">
      <hospitality-bot-button
        label="Email Invoice"
        variant="outlined"
        (onClick)="handleEmailInvoice()"
        [isLoading]="loadingPdf"
        [disabled]="failedToLoad"
      ></hospitality-bot-button>

      <hospitality-bot-button
        *ngIf="isInvoiceGenerated"
        variant="text"
        label="Download PDF"
        (onClick)="handleDownload()"
        [isLoading]="loadingPdf"
        [disabled]="failedToLoad"
      ></hospitality-bot-button>

      <!-- <p-splitButton
      *ngIf="!isInvoiceGenerated"
      label="Generate"
      (onClick)="handleGenerateInvoice()"
      [model]="items"
    ></p-splitButton> -->
      <hospitality-bot-button
        *ngIf="!isInvoiceGenerated"
        label="Generate Invoice"
        (onClick)="handleGenerateInvoice()"
        [isLoading]="loadingPdf"
        [disabled]="failedToLoad"
      ></hospitality-bot-button>
    </ng-container>
  </hospitality-bot-navigation-header>

  <ng-container *ngIf="!loadingPdf; else loader">
    <iframe
      class="iframe"
      [src]="previewUrl | safeUrl"
      height="100%"
      width="100%"
      allowFullScreen
      title="Dashboard"
    ></iframe>
  </ng-container>
</div>

<ng-template #loader>
  <hospitality-bot-loader-bounce class="loader"></hospitality-bot-loader-bounce>
</ng-template>
