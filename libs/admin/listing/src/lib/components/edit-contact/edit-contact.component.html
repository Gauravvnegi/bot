<div class="wrapper">
  <hospitality-bot-modal-header
    [tableName]="tableName"
    (onModalClose)="close()"
  >
  </hospitality-bot-modal-header>

  <div class="table-wrapper">
    <p-table
      class="contact-table"
      *ngIf="contactFA?.controls"
      #dt
      [styleClass]="tableConfig.styleClass"
      [resizableColumns]="isResizableColumns"
      [autoLayout]="isAutoLayout"
      [loading]="loading"
      [columns]="cols"
      [value]="contactFA?.controls"
      [paginator]="false"
      [rows]="rowsPerPage"
      [showCurrentPageReport]="showCurrentPageReport"
      [rowsPerPageOptions]="rowsPerPageOptions"
      [(first)]="first"
      [totalRecords]="totalRecords"
      [filterDelay]="0"
      [(selection)]="selectedRows"
      (onRowSelect)="onRowSelect($event)"
      (onRowUnselect)="onRowUnselect($event)"
      (onHeaderCheckboxToggle)="onToggleSelectAll($event)"
      (sortFunction)="customSort($event)"
      [customSort]="isCustomSort"
      (onFilter)="onDataFilter()"
    >
      <!-- *******************************EMPTY TABLE VIEW******************************* -->
      <ng-template pTemplate="emptymessage">
        <tr hospitality-bot-empty-view [noOfColumns]="cols.length - 1"></tr>
      </ng-template>

      <!-- *******************************HEADER WITH SEARCH******************************* -->
      <ng-template pTemplate="header" let-columns #header>
        <tr
          hospitality-bot-table-header
          [columns]="columns"
          [showCheckbox]="isSelectable"
          (search)="handleFieldSearch($event)"
        ></tr>
      </ng-template>
      <!-- **************************************BODY********************************* -->
      <ng-template
        pTemplate="body"
        let-rowData
        let-columns="columns"
        let-rowIndex="rowIndex"
      >
        <tr class="table-row" [formGroup]="rowData">
          <td>
            <div class="cell-content" *ngIf="rowData; else emptyCell">
              <hospitality-bot-input
                class="half-width"
                controlName="email"
                [props]="{
                  placeholder: 'Email'
                }"
              ></hospitality-bot-input>
            </div>
          </td>
          <td>
            <div class="cell-content" *ngIf="rowData; else emptyCell">
              <hospitality-bot-select
                [options]="salutationList"
                controlName="salutation"
                [settings]="{
                  isAppendToBody: true
                }"
              ></hospitality-bot-select>
            </div>
          </td>
          <td>
            <div class="cell-content" *ngIf="rowData; else emptyCell">
              <hospitality-bot-input
                class="half-width"
                controlName="firstName"
                [props]="{
                  placeholder: 'First Name'
                }"
              ></hospitality-bot-input>
            </div>
          </td>
          <td>
            <div class="cell-content" *ngIf="rowData; else emptyCell">
              <hospitality-bot-input
                class="half-width"
                controlName="lastName"
                [props]="{
                  placeholder: 'Last Name'
                }"
              ></hospitality-bot-input>
            </div>
          </td>
          <td>
            <div class="cell-content" *ngIf="rowData; else emptyCell">
              <hospitality-bot-input
                class="half-width"
                controlName="companyName"
                [props]="{
                  placeholder: 'Company Name'
                }"
              ></hospitality-bot-input>
            </div>
          </td>
          <td>
            <div class="cell-content" *ngIf="rowData; else emptyCell">
              <hospitality-bot-input
                class="half-width"
                controlName="mobile"
                [props]="{
                  placeholder: 'Mobile No.',
                  type: 'number'
                }"
              ></hospitality-bot-input>
            </div>
          </td>
          <td (click)="removeContactField(rowData)">
            <div class="remove-table">
              <i class="fa fa-times" aria-hidden="true"></i>
            </div>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>

  <hospitality-bot-button
    class="add-more"
    label="+ Add More"
    variant="text"
    severity="primary"
    (onClick)="generateContactField()"
  ></hospitality-bot-button>

  <hospitality-bot-button
    class="submit"
    label="Submit"
    (onClick)="submitContact()"
  ></hospitality-bot-button>
</div>
