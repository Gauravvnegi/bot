<div class="wrapper">
  <header class="wrapper-header">
    <div class="back">
      <mat-icon class="material-icons" matSuffix (click)="redirectToTable()"
        >keyboard_backspace</mat-icon
      >
      <p class="label">
        {{ 'listingForm.editListing' | translate }}
      </p>
    </div>
  </header>
  <div class="stats-container">
    <div class="stats">
      <div class="stats__value">{{ listData?.stats.totalContacts }}</div>
      <div class="stats__text">{{ 'stats.totalContacts' | translate }}</div>
    </div>
    <div class="stats">
      <div class="stats__value">{{ listData?.stats.unsubscribed }}</div>
      <div class="stats__text">{{ 'stats.unsubscribed' | translate }}</div>
    </div>
    <div class="stats">
      <div class="stats__value">{{ listData?.stats.bounce }}</div>
      <div class="stats__text">{{ 'stats.bounce' | translate }}</div>
    </div>
    <div class="stats">
      <div class="stats__value">{{ listData?.stats.sendCampaign }}</div>
      <div class="stats__text">{{ 'stats.sendCampaign' | translate }}</div>
    </div>
    <div class="stats">
      <div class="stats__value">{{ listData?.stats.scheduleCampaign }}</div>
      <div class="stats__text">{{ 'stats.scheduleCampaign' | translate }}</div>
    </div>
  </div>
  <form [formGroup]="listFG">
    <div class="wrapper-form">
      <div class="fields">
        <div class="field">
          <mat-label class="mat-label">{{
            'formFieldLabels.name' | translate
          }}</mat-label>
          <mat-form-field>
            <input
              matInput
              placeholder="Enter Listing Name"
              formControlName="name"
            />
            <mat-error
              *ngIf="
                listFG.get('name').touched &&
                listFG.get('name').hasError('required')
              "
            >
              {{ 'validationMessage.name' | translate }}
            </mat-error>
          </mat-form-field>
        </div>
        <div class="field">
          <hospitality-bot-topic-dropdown
            [hotelId]="hotelId"
            [name]="'topicName'"
            [parentForm]="listFG"
          ></hospitality-bot-topic-dropdown>
        </div>
      </div>
      <div class="fields">
        <div class="field">
          <mat-label class="mat-label">{{
            'formFieldLabels.description' | translate
          }}</mat-label>
          <mat-form-field class="description">
            <input
              matInput
              placeholder="Write Your Description Here"
              formControlName="description"
            />
            <mat-error
              *ngIf="
                listFG.get('description').touched &&
                listFG.get('description').hasError('required')
              "
            >
              {{ 'validationMessage.description' | translate }}
            </mat-error>
          </mat-form-field>
        </div>
      </div>
    </div>
    <div class="wrapper-text" *ngIf="!loading">
      <hospitality-bot-contact-datatable
        [add]="false"
        [dataSource]="listFG?.get('marketingContacts')?.value"
        [totalRecords]="listFG?.get('marketingContacts')?.value.length"
        [hotelId]="hotelId"
        [list]="listFG?.getRawValue()"
        (updateContacts)="updateContactList($event)"
      ></hospitality-bot-contact-datatable>
    </div>
    <div class="wrapper-form">
      <div class="fields">
        <div class="toggle_wrapper">
          <mat-label class="mat-label">{{
            'formFieldLabels.active' | translate
          }}</mat-label>
          <div class="status status--left">
            {{ 'active.disable' | translate }}
          </div>
          <mat-slide-toggle formControlName="active"></mat-slide-toggle>
          <div class="status status--right">
            {{ 'active.enable' | translate }}
          </div>
        </div>
      </div>
    </div>
    <div class="save-section">
      <div
        class="save-button"
        (click)="updateList()"
        [ngClass]="{ active: !isSaving, disabled: isSaving }"
      >
        <div class="save-text">
          <i *ngIf="isSaving" class="fa fa-spinner fa-spin"></i>
          {{ isSaving ? 'Saving' : 'Save' }}
        </div>
      </div>
    </div>
  </form>
</div>
