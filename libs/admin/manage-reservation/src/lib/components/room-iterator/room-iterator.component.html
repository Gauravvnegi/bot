<div class="wrapper">
  <div #main [formGroup]="parentFormGroup">
    <div class="header">
      <div
        *ngFor="let field of fields"
        [style.flexBasis]="field.width ? field.width : width"
        class="header__cell"
      >
        {{ field.label }}
      </div>
    </div>
    <div formGroupName="roomInformation">
      <div
        formArrayName="roomTypes"
        *ngFor="let controls of roomTypeArray.controls; let i = index"
        class="values-row"
      >
        <div
          [formGroupName]="i"
          *ngFor="let field of fields"
          [style.flexBasis]="field.width ? field.width : width"
          [style.width]="'100px'"
          [ngSwitch]="field.type"
        >
          <hospitality-bot-input
            *ngSwitchCase="'input'"
            [controlName]="field.name"
            [props]="{
              placeholder: field.placeholder,
              type: 'number'
            }"
            [disabled]="field.disabled"
          ></hospitality-bot-input>
          <hospitality-bot-multi-select
            *ngSwitchCase="'multi-select'"
            [controlName]="field.name"
            [props]="{
              placeholder: field.placeholder,
              isAsync: false
            }"
            [options]="
              field.options
                ? field.options
                : controls.get('roomNumberOptions').value
            "
            [disabled]="field.disabled"
            [settings]="{ showHeader: false }"
          ></hospitality-bot-multi-select>
          <hospitality-bot-select
            *ngSwitchCase="'select'"
            class="select"
            [controlName]="field.name"
            [props]="{
              placeholder: field.placeholder,
              isAsync: field.isAsync
            }"
            (paginate)="loadMoreRoomTypes(i)"
            (onSearch)="searchRoomTypes($event)"
            [options]="
              field.options
                ? field.options
                : controls.get('ratePlanOptions').value
            "
            [disabled]="field.disabled"
            [loading]="field.options ? loadingRoomTypes : false"
          ></hospitality-bot-select>
        </div>
        <mat-icon class="delete" (click)="removeField(i)">clear</mat-icon>
      </div>
    </div>
  </div>
  <hospitality-bot-button
    class="action-btn"
    label="+ Add More Rooms"
    (onClick)="addNewField()"
    variant="text"
  ></hospitality-bot-button>
</div>
