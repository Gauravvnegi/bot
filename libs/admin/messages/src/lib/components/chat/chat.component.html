<div style="height: 100%;">
  <div
    style="
      height: 62px;
      width: 100%;
      background: #ffffff;
      display: flex;
      align-items: center;
      border-bottom: 1px solid #9eaeb8;
      cursor: pointer;
    "
    (click)="openGuestInfo()"
  >
    <div
      style="
        width: 28px;
        height: 28px;
        border-radius: 50%;
        background: chartreuse;
        margin: 0 20px;
      "
    ></div>
    <div
      style="
        font: normal normal medium 14px/19px Roboto;
        letter-spacing: 0.84px;
        color: #002046;
        opacity: 1;
      "
    >
      {{ selectedChat ? selectedChat.name : '' }}
    </div>
  </div>
  <div
    style="
      height: calc(100% - 124px);
      background: #f1f1f1;
      overflow-y: auto;
      padding: 20px;
      position: relative;
    "
    (scroll)="onScroll($event)"
    *ngIf="chatDates.length; else noChat"
    #scrollMe
  >
    <ng-container *ngFor="let date of chatDates">
      <div
        style="
          text-align: center;
          margin-bottom: 10px;
          font-family: Roboto;
          font-size: 12px;
          font-weight: normal;
          font-stretch: normal;
          font-style: normal;
          line-height: normal;
          letter-spacing: 0.72px;
          color: #002046;
        "
      >
        {{ date }}
      </div>
      <div
        *ngFor="let message of chatList[date]"
        style="display: flex;"
        [ngStyle]="
          message.direction === 'OUTBOUND'
            ? { 'justify-content': 'flex-end' }
            : {}
        "
      >
        <div
          [ngClass]="
            message.direction === 'OUTBOUND' ? 'right-message' : 'left-message'
          "
        >
          <div
            [ngClass]="
              message.direction === 'OUTBOUND'
                ? 'right-message__text'
                : 'left-message__text'
            "
          >
            {{ message.text }}
          </div>
          <div class="message__time">{{ message.getTime() }}</div>
        </div>
      </div>
    </ng-container>
  </div>
  <ng-template #noChat>
    <div
      style="
        height: calc(100% - 124px);
        background: #f1f1f1;
        overflow-y: auto;
        padding: 20px;
        position: relative;
      "
    ></div>
  </ng-template>
  <div
    style="
      height: 62px;
      width: 100%;
      background: #ffffff;
      padding: 10px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    "
    *ngIf="chatFG && selectedChat?.enableSend; else noSend"
  >
    <div style="height: 100%; width: 100%;" [formGroup]="chatFG">
      <div class="" style="position: relative;height: 100%; width: calc(100% - 60px);">
        <input
        matInput
        type="text"
        class="message-field-input"
        placeholder="Type Message"
        formControlName="message"
        (keyup)="checkForEnterKey($event)"/>
        <img src="assets/svg/smile.svg"
        style="position:absolute; right:10px;top:48%;transform: translateY(-50%);"  />
      </div>
    </div>
    <div style="cursor: pointer;" (click)="sendMessage()">
      <img src="assets/svg/send-message.svg" />
    </div>
  </div>
  <ng-template #noSend>
    <div
      style="
        height: 62px;
        width: 100%;
        background: #ffffff;
        padding: 10px 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font: normal normal normal 14px/19px Roboto;
        letter-spacing: 0.84px;
        color: #fb3d4e;
      "
    >
      As per WhatsApp's rules, you can only respond to a user within 24 hours of
      their messages.
    </div>
  </ng-template>
</div>
