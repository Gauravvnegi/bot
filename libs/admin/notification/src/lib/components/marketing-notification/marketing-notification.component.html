<div class="container">
  <div class="header">Send E-mail</div>
  <div class="body" [formGroup]="emailFG" *ngIf="emailFG">
    <div class="fields">
      <div class="field">
        <mat-label class="mat-label">From:</mat-label>
        <mat-form-field>
          <mat-select formControlName="fromId">
            <mat-option *ngFor="let item of fromEmailList" [value]="item.id">{{
              item.email
            }}</mat-option>
          </mat-select>
          <mat-error
            *ngIf="
              emailFG.get('fromId').touched &&
              emailFG.get('fromId').hasError('required')
            "
          >
            From is required
          </mat-error>
        </mat-form-field>
      </div>
    </div>
    <div class="fields">
      <div class="field">
        <mat-label class="mat-label">Topic:</mat-label>
        <mat-form-field>
          <mat-select (selectionChange)="handleTopicChange($event)">
            <mat-option value="" *ngIf="topicList.length === 0" disabled
              >NO DATA</mat-option
            >
            <mat-option *ngFor="let topic of topicList" [value]="topic.id">{{
              topic.name
            }}</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <div class="field">
        <mat-label class="mat-label">Template:</mat-label>
        <mat-form-field>
          <mat-select (selectionChange)="handleTemplateChange($event)">
            <mat-option value="" *ngIf="templateList.length === 0" disabled
              >NO DATA</mat-option
            >
            <mat-option
              *ngFor="let template of templateList"
              [value]="template.htmlTemplate"
              >{{ template.name }}</mat-option
            >
          </mat-select>
        </mat-form-field>
      </div>
    </div>
    <div class="fields">
      <div class="field full-width">
        <mat-label class="mat-label">To:</mat-label>
        <mat-form-field>
          <mat-chip-list #chipList>
            <mat-chip
              *ngFor="let email of emailIds?.value"
              (removed)="removeEmail(email)"
            >
              {{ email }}
              <button matChipRemove>
                <mat-icon>cancel</mat-icon>
              </button>
            </mat-chip>
            <input
              placeholder="Search by name, E-mail, Number, Conf. No., Profile ID or by subscriber group or listing"
              [matChipInputFor]="chipList"
              [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
              [matChipInputAddOnBlur]="addOnBlur"
              (matChipInputTokenEnd)="addEmail($event)"
            />
            <p>Bcc</p> &nbsp;
            <p>Cc</p>
          </mat-chip-list>
        </mat-form-field>
      </div>
    </div>
    <div class="fields">
      <div class="field full-width">
        <mat-label class="mat-label">Subject:</mat-label>
        <mat-form-field class="description">
          <input
            matInput
            formControlName="subject"
            placeholder="Be specific & concise to spark interest"
          />
          <mat-error
            *ngIf="
              emailFG.get('subject').touched &&
              emailFG.get('subject').hasError('required')
            "
          >
            Subject is required
          </mat-error>
          <mat-error
            *ngIf="
              emailFG.get('subject').touched &&
              emailFG.get('subject').hasError('maxlength')
            "
          >
            Maximum length is 200 characters.
          </mat-error>
        </mat-form-field>
      </div>
    </div>
    <div class="fields">
      <div style="width: calc(100% - 180px); margin: 10px 90px;">
        <ckeditor
          [editor]="Editor"
          class="row-body-editor"
          formControlName="message"
        ></ckeditor>
      </div>
    </div>
  </div>
  <div class="btn-wrapper">
    <div class="schedule">
      <div class="schedule__text">
        Schedule
      </div>
    </div>
    <div class="send">
      <div class="send__text">
        Send
      </div>
    </div>
  </div>
</div>
