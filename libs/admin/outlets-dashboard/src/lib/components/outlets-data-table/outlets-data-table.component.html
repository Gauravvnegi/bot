<div
  class="action-header"
  [ngClass]="{ 'action-header__sticky': isScrolledUp }"
  [formGroup]="tableFG"
>
  <div class="heading-wrapper">
    <div class="heading">Reservations</div>
    <hospitality-bot-info-panel type="booking"></hospitality-bot-info-panel>
  </div>

  <div class="action-wrapper">
    <div class="pull-right">
      <label class="type-label" *ngFor="let option of reservationTypes">
        <input
          type="radio"
          formControlName="reservationType"
          [value]="option.value"
          (click)="setReservationType(option.value)"
        />
        <div class="image">
          <img
            [src]="
              selectedReservationType === option.value
                ? option.whiteUrl
                : option.url
            "
            [alt]="option.value"
          />
        </div>
      </label>
    </div>
    <hospitality-bot-button
      label="+ Add New Order"
      (onClick)="addNewOrder()"
    ></hospitality-bot-button>
    <hospitality-bot-export-list
      [additionalActionItems]="additionalActionItems"
      (onDocumentActions)="onDocumentActions()"
      [documentTypes]="documentTypes"
      [documentActionTypes]="documentActionTypes"
      [isDisable]="values.length === 0"
    ></hospitality-bot-export-list>
  </div>
</div>
<div [ngClass]="{ 'sticky-header-gap': isScrolledUp }"></div>

<div class="table-container">
  <p-table
    #dt
    [styleClass]="tableConfig.styleClass"
    [resizableColumns]="isResizableColumns"
    [autoLayout]="isAutoLayout"
    [loading]="loading"
    [value]="values"
    [paginator]="isPaginator"
    [rows]="rowsPerPage"
    [showCurrentPageReport]="showCurrentPageReport"
    [rowsPerPageOptions]="rowsPerPageOptions"
    currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
    [(first)]="first"
    [totalRecords]="totalRecords"
    [filterDelay]="0"
    [selectionMode]="selectionMode"
    [(selection)]="selectedRows"
    (onRowSelect)="onRowSelect($event)"
    (onRowUnselect)="onRowUnselect($event)"
    (sortFunction)="customSort($event)"
    [customSort]="isCustomSort"
    (onFilter)="onDataFilter($event)"
  >
    <ng-template pTemplate="caption">
      <div class="caption__wrapper" [formGroup]="tableFG">
        <ng-container [ngTemplateOutlet]="tabFilter"> </ng-container>
        <hospitality-bot-filter-chips
          *ngIf="isQuickFilters"
          [chips]="filterChips"
          (onChange)="toggleQuickReplyFilter($event)"
        ></hospitality-bot-filter-chips>
      </div>
    </ng-template>

    <ng-template pTemplate="emptymessage">
      <tr hospitality-bot-empty-view [noOfColumns]="cols.length"></tr>
    </ng-template>
    <!-- **************************************BODY********************************* -->
    <ng-template
      pTemplate="body"
      let-rowData
      let-columns="columns"
      let-rowIndex="rowIndex"
    >
        <hospitality-bot-reservation-card
          class="reservation-card"
          [data]="rowData"
        ></hospitality-bot-reservation-card>
    </ng-template>

    <!-- *********************************FOOTER******************************* -->
    <ng-template pTemplate="summary">
      <p-paginator
        #paginator
        [rows]="rowsPerPage"
        [totalRecords]="totalRecords"
        [rowsPerPageOptions]="rowsPerPageOptions"
        (onPageChange)="paginate($event)"
        [currentPageReportTemplate]="reportTemplate"
        showCurrentPageReport="true"
      ></p-paginator>
    </ng-template>
  </p-table>
</div>
<ng-template #emptyTable>
  <hospitality-bot-empty-table
    [content]="{
      description: 'No data available to view',
      imageSrc: imageSrc
    }"
  >
    <ng-container [ngTemplateOutlet]="tabFilter"> </ng-container>
  </hospitality-bot-empty-table>
</ng-template>

<ng-template #tabFilter>
  <hospitality-bot-tab-group
    [selectedIndex]="tabFilterIdx"
    *ngIf="isTabFilters"
    [listItems]="tabFilterItems"
    (selectedTabChange)="onSelectedTabFilterChange($event)"
  ></hospitality-bot-tab-group>
</ng-template>
<ng-template #emptyCell>
  <div class="emptyCell">&mdash;</div>
</ng-template>
