<div class="container" [formGroup]="userForm">
  <!-- Header -->
  <ng-container formGroupName="orderInformation">
    <div class="header">
      <div class="heading">
        <!-- <span class="header-data">
          {{ data.tableName }} - {{ data.area }}
          <img
            class="pos-reservation-icon"
            src="assets/svg/pos-reservation.svg"
          />
        </span> -->
        <div class="form-block menu">
          <hospitality-bot-multi-select
            class="one-third-width menu-field"
            controlName="menu"
            [options]="menuOptions"
            [props]="{
              placeholder: 'Select Menu',
              dropdownIcon: 'pi pi-sort-down'
            }"
            [settings]="{
              placeholder: 'Select Menu',
              showChips: false,
              maxSelectedLabels: 1
            }"
          ></hospitality-bot-multi-select>
        </div>
      </div>

      <div class="invoice-id">
        <!-- Invoice Id: {{ data.invoiceId }} &nbsp; -->
        <span>
          <img
            class="close-sidebar-icon"
            src="assets/svg/close-sidebar.svg"
            (click)="close()"
          />
        </span>
      </div>
    </div>

    <!-- Form -->
    <div class="pos-form">
      <hospitality-bot-search
        class="one-fourth-width search"
        controlName="search"
        (clear)="clearSearch()"
        (search)="getSearchValue($event)"
        [searchApi]="searchApi"
        [props]="{
          placeholder: 'Search by Dish Name or Code'
        }"
      ></hospitality-bot-search>
      <hospitality-bot-multi-select
        class="one-fifth-width"
        controlName="tableNumber"
        [options]="tableNumbers"
        label="Table No./Area"
      ></hospitality-bot-multi-select>
      <hospitality-bot-select
        class="one-fifth-width"
        controlName="staff"
        [options]="staffList"
        [props]="{
          placeholder: 'Select'
        }"
        label="Staff"
      ></hospitality-bot-select>
      <hospitality-bot-select
        class="one-fifth-width"
        controlName="guest"
        [options]="guestList"
        [props]="{
          placeholder: 'Select'
        }"
        label="Guest"
      ></hospitality-bot-select>
      <hospitality-bot-input
        class="one-fifth-width"
        controlName="numberOfPersons"
        [props]="{
          placeholder: 'Enter'
        }"
        label="No. of Person"
      ></hospitality-bot-input>
    </div>
  </ng-container>

  <div class="tab-header">
    <hospitality-bot-custom-tab-header
      [listItems]="tabFilters"
    ></hospitality-bot-custom-tab-header>
  </div>

  <div class="content">
    <div class="menu-section">
      <div class="meal-preferences">
        <span
          *ngFor="let preference of mealPreferences"
          class="meal-preference"
          [class.selected]="selectedPreference === preference"
          (click)="selectedPreference = preference"
        >
          <img
            *ngIf="mealPreferenceConfig[preference]?.image"
            [ngStyle]="{
              padding: '2px'
            }"
            [src]="mealPreferenceConfig[preference]?.image"
          />
          {{ mealPreferenceConfig[preference].title }}
        </span>
      </div>

      <h3 class="menu-heading">
        Italian BreakFast
      </h3>
      <div class="menu-items">
        <ng-container *ngFor="let card of getCards()">
          <hospitality-bot-menu-item-card
            class="menu-item"
            [itemCard]="card"
          ></hospitality-bot-menu-item-card>
        </ng-container>
      </div>
    </div>
    <div class="summary-section">
      <hospitality-bot-order-summary></hospitality-bot-order-summary>
    </div>
  </div>
</div>

<div class="btn-wrapper">
  <div class="checkbox">
    <input
      #feedbackCheckbox
      type="checkbox"
      [checked]="sendFeedback"
      (change)="onSendFeedback($event.target)"
    />
    <label
      class="checkbox-label"
      (click)="feedbackCheckbox.click()"
      for="checkbox"
      >Send Feedback</label
    >
    <input
      #emailCheckbox
      type="checkbox"
      [checked]="emailInvoice"
      (change)="onEmailInvoice($event.target)"
    />
    <label class="checkbox-label" (click)="emailCheckbox.click()" for="checkbox"
      >Email Invoice</label
    >
  </div>
  <div class="buttons">
    <hospitality-bot-button
      label="Post to Room"
      (onClick)="postToRoom()"
      minWidth="120px"
      height="40px"
    ></hospitality-bot-button>
    <hospitality-bot-button
      label="Save"
      (onClick)="handleSave()"
      minWidth="120px"
      height="40px"
    ></hospitality-bot-button>
    <hospitality-bot-button
      label="Save & Print"
      (onClick)="handleSave(true)"
      minWidth="120px"
      height="40px"
    ></hospitality-bot-button>
    <hospitality-bot-button
      label="Print KOT"
      (onClick)="handleKOT(true)"
      minWidth="120px"
      height="40px"
    ></hospitality-bot-button>
    <hospitality-bot-button
      label="KOT"
      (onClick)="handleKOT()"
      minWidth="120px"
      height="40px"
    ></hospitality-bot-button>
    <hospitality-bot-button
      label="Cancel"
      variant="text"
      severity="reset"
      (onClick)="close()"
      minWidth="120px"
      height="40px"
    ></hospitality-bot-button>
  </div>
</div>
