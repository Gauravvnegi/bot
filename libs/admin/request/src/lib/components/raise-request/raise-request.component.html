<div class="container">
  <div class="header">
    <div class="button raise-request-btn">
      {{ 'Raise Request' }}
    </div>
    <div (click)="close({ status: false })" class="close">
      <i class="fa fa-times" aria-hidden="true"></i>
    </div>
  </div>
  <div class="body">
    <div class="form-elements-groups" [formGroup]="searchFG">
      <div class="form-elements-container full-width">
        <img
          class="icon"
          [src]="requestConfig.images.room.url"
          [alt]="requestConfig.images.room.alt"
        />
        <input
          matInput
          type="text"
          class="form-elements"
          placeholder="Room *"
          formControlName="search"
        />
      </div>
      <mat-error
        *ngIf="
          requestFG.get('roomNo').touched &&
          requestFG.get('roomNo').hasError('required')
        "
      >
        {{ 'Room No is required' }}
      </mat-error>
    </div>
    <div class="form-elements-groups" [formGroup]="requestFG">
      <div class="form-elements-container">
        <img
          class="icon"
          [src]="requestConfig.images.user.url"
          [alt]="requestConfig.images.user.alt"
        />
        <input
          matInput
          class="form-elements"
          placeholder="First Name *"
          formControlName="firstName"
        />
        <mat-error
          class="error"
          *ngIf="
            requestFG.get('firstName').touched &&
            requestFG.get('firstName').hasError('required')
          "
        >
          {{ 'First Name is required' }}
        </mat-error>
      </div>
      <div class="form-elements-container">
        <img
          class="icon"
          [src]="requestConfig.images.user.url"
          [alt]="requestConfig.images.user.alt"
        />
        <input
          matInput
          class="form-elements"
          placeholder="LastName *"
          formControlName="lastName"
        />
        <mat-error
          *ngIf="
            requestFG.get('lastName').touched &&
            requestFG.get('lastName').hasError('required')
          "
        >
          {{ 'Last Name is required'}}
        </mat-error>
      </div>
      <div class="form-elements-container">
        <img
          class="icon"
          [src]="requestConfig.images.user.url"
          [alt]="requestConfig.images.user.alt"
        />
        <input
          type="text"
          class="form-elements"
          matInput
          formControlName="itemName"
          placeholder="Item Name*"
          required
          [matAutocomplete]="autoGroup"
        />
        <mat-autocomplete
          #autoGroup="matAutocomplete"
          (optionSelected)="handleItemNameChange($event)"
        >
          <mat-option
            *ngFor="let service of filteredCMSServiceOptions | async"
            [value]="service.itemName"
          >
            {{ service.itemName }}
          </mat-option>
        </mat-autocomplete>
        <mat-error
          *ngIf="
            requestFG.get('itemName').touched &&
            requestFG.get('itemName').hasError('required')
          "
        >
          {{ 'Item Name is required' }}
        </mat-error>
      </div>
      <div class="form-elements-container">
        <img
          class="icon"
          [src]="requestConfig.images.shopping.url"
          [alt]="requestConfig.images.shopping.alt"
        />
        <mat-select
          class="form-elements"
          placeholder="Item Code*"
          formControlName="itemCode"
          disabled
        >
          <mat-option
            *ngFor="let service of cmsServices"
            [value]="service.itemCode"
            >{{ service.itemCode }}</mat-option
          >
        </mat-select>
        <mat-error
          *ngIf="
            requestFG.get('itemCode').touched &&
            requestFG.get('itemName').hasError('required')
          "
        >
          {{ 'Item Code is required'}}
        </mat-error>
      </div>
      <div class="form-elements-container">
        <img
          class="icon"
          [src]="requestConfig.images.pyramid.url"
          [alt]="requestConfig.images.pyramid.alt"
        />
        <mat-select
          class="form-elements"
          placeholder="Priority Code*"
          formControlName="priority"
        >
          <mat-option
            *ngFor="let priority of priorityList"
            [value]="priority.value"
            >{{ priority.label }}</mat-option
          >
        </mat-select>
        <mat-error
          *ngIf="
            requestFG.get('priority').touched &&
            requestFG.get('priority').hasError('required')
          "
        >
          {{ 'Priority code is required' }}
        </mat-error>
      </div>
      <div class="form-elements-container">
        <img
          class="icon"
          [src]="requestConfig.images.hourglass.url"
          [alt]="requestConfig.images.hourglass.alt"
        />
        <mat-select
          class="form-elements"
          placeholder="Job Duration"
          formControlName="jobDuration"
          disabled
        >
          <mat-option
            *ngFor="let item of [].constructor(60); let i = index"
            [value]="i + 1"
            >{{ i + 1 }} {{ 'minute' }}</mat-option
          >
        </mat-select>
      </div>
      <div class="form-elements-container full-width">
        <img
          class="icon"
          [src]="requestConfig.images.comment.url"
          [alt]="requestConfig.images.comment.alt"
        />
        <textarea
          formControlName="remarks"
          class="form-elements"
          placeholder="Description"
          matInput
        ></textarea>
      </div>
    </div>
  </div>
  <div class="request-popup-btnwrap">
    <hospitality-bot-button
      label="Cancel"
      (click)="close({ status: false })"
      variant="outlined"
    ></hospitality-bot-button>
    <hospitality-bot-button
      label="Save"
      (click)="raiseRequest()"
      [disabled]="isRaisingRequest"
    ></hospitality-bot-button>
  </div>
</div>
