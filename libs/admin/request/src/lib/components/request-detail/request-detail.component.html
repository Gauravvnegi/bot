<div class="request-items" *ngIf="checkForData(); else noRequestData">
  <div class="request-items-header">
    <div class="request-items-header-left">
      <div class="request-items-header-left-avt">
        {{ data.guestDetails.primaryGuest.getProfileNickName() }}
      </div>
      <div class="request-items-header-left-title">
        {{ data.guestDetails.primaryGuest.getFullName() }}
      </div>
    </div>
    <div class="request-items-header-right" [formGroup]="requestFG">
      <div class="form-elements-container">
        <mat-select
          class="form-elements"
          placeholder="Status"
          formControlName="status"
          (selectionChange)="handleStatusChange($event)"
        >
          <mat-option
            *ngFor="let status of statusList"
            [value]="status.value"
            >{{ status.label }}</mat-option
          >
        </mat-select>
      </div>
      <div class="man-icon" (click)="openGuestInfo()">
        <img
          class="icon"
          src="assets/svg/hamBurger.svg"
          [alt]=""
          *ngIf="!guestInfoEnable"
        />
      </div>
    </div>
  </div>
  <div class="request-items-body">
    <div class="request-items-body-title">
      {{ data.itemName }}
    </div>
    <div class="request-items-body-subtitle">
      {{ data.remarks }}
    </div>
    <div class="request-items-body-card">
      <table>
        <tr class="tr">
          <th>{{ 'requestDetail.priorityCode' | translate }}</th>
          <th>{{ 'requestDetail.bookingRoomNo' | translate }}</th>
          <th>{{ 'requestDetail.company' | translate }}</th>
          <th>{{ 'requestDetail.contactInfo' | translate }}</th>
        </tr>
        <tr>
          <td>
            <div>
              {{ data.itemCode }}
            </div>
            <div
              class="request-items-body-card-status"
              [ngClass]="{
                'priority-low': data.priority === 'Low',
                'priority-medium': data.priority === 'Medium',
                'priority-high': data.priority === 'High',
                'priority-asap': data.priority === 'ASAP'
              }"
            >
              {{ data.priority }}
            </div>
          </td>
          <td>
            <div>{{ data.confirmationNumber }}</div>
            <div class="request-items-body-card-booking">
              {{ data.rooms[0]?.getRoomNumberAndType() }}
            </div>
          </td>
          <td>-</td>
          <td>
            <a href="tel:{{ data.guestDetails.getPhoneNumbers() }}">
              <div>
                {{ data.guestDetails.getPhoneNumbers() }}
              </div>
            </a>
          </td>
        </tr>
      </table>
    </div>
    <div class="request-items-body-card">
      <table>
        <tr class="tr">
          <th>{{ 'requestDetail.openDateTime' | translate }}</th>
          <th>{{ 'requestDetail.closeDateTime' | translate }}</th>
          <th>{{ 'requestDetail.jobDuration' | translate }}</th>
          <th>{{ 'requestDetail.sla' | translate }}</th>
          <th>{{ 'requestDetail.quantity' | translate }}</th>
        </tr>
        <tr>
          <td>
            {{ data.getRequestDateTime() }}
          </td>
          <td>{{ data.getClosedTime() || '------' }}</td>
          <td>JD: {{ data.jobDuration }}m</td>
          <td
            [ngClass]="{
              'sla-timeout': data.getSLAvalue() < 0,
              'sla-pending': data.getSLAvalue() <= 5 && data.getSLAvalue() >= 0,
              'sla-new': data.getSLAvalue() > 5
            }"
          >
            {{ data.getSLA() }}
          </td>
          <td>{{ data.quantity || 'None' }}</td>
        </tr>
      </table>
    </div>
  </div>
</div>
<ng-template #noRequestData>
  <div class="no-data">
    <div class="no-data__img">
      <img src="assets/svg/no_request.svg" alt="No Request" />
    </div>
    <div class="no-data__title">
      No Requests
    </div>
    <div class="no-data__description">
      Please select a request to view
    </div>
  </div>
</ng-template>
