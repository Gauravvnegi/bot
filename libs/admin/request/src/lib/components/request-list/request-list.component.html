<div
  class="right-side"
  [ngStyle]="
    !showFilter
      ? { display: 'block', width: '100%' }
      : { display: 'none', height: '0px' }
  "
>
  <div class="right-side-header">
    <div>
      <hospitality-bot-search
        [parentFG]="parentFG"
        [hotelId]="hotelId"
        [globalQueries]="globalQueries"
        [entityType]="entityType"
        [filterData]="filterData"
        (clear)="clearSearch()"
        (search)="getSearchValue($event)"
      ></hospitality-bot-search>
    </div>
    <div class="right-side-header-filter">
      <img
        src="assets/svg/Filter-Icon.svg"
        alt="filter"
        (click)="showFilter = true"
      />
    </div>
  </div>
  <div class="right-side-subheader">
    <div class="right-side-header-nav">
      <hospitality-bot-tab-group
        [listItems]="tabFilterItems"
        [selectedIndex]="tabFilterIdx"
        (selectedTabChange)="onSelectedTabFilterChange($event)"
      ></hospitality-bot-tab-group>
    </div>
  </div>
  <ng-template #loader>
    <div class="loader">
      <!-- <p class="loading">Loading</p> -->
      <div class="spinner">
        <div class="bounce1"></div>
        <div class="bounce2"></div>
        <div class="bounce3"></div>
      </div>
    </div>
  </ng-template>
  <div
    class="right-side-body"
    #requestList
    (scroll)="onScroll($event)"
    *ngIf="!loading; else loader"
  >
    <ng-container *ngIf="listData?.length; else noList">
      <ng-container *ngFor="let item of listData">
        <div
          class="right-side-body-card"
          (click)="setSelectedRequest(item)"
          [ngStyle]="
            selectedRequest &&
            selectedRequest.id === item.id && { background: '#f1f1f1' }
          "
        >
          <div class="right-side-body-card-avt">
            {{ item.guestDetails.primaryGuest.getProfileNickName() }}
          </div>
          <div class="content-wrap">
            <div class="content-wrap-r1">
              <div>RNO: {{ item.rooms[0]?.roomNumber }}</div>
              <div
                class="content-wrap-r1-status"
                [ngClass]="{
                  'priority-low': item.priority === 'Low',
                  'priority-medium': item.priority === 'Medium',
                  'priority-high': item.priority === 'High',
                  'priority-asap': item.priority === 'ASAP'
                }"
              >
                {{ item.priority }}
              </div>
            </div>
            <div class="content-wrap-title">
              {{ item.guestDetails.primaryGuest.getFullName() }}
            </div>
            <div class="content-wrap-subtitle">
              {{ item.itemName }}
            </div>
            <div class="content-wrap-rank">
              {{ item.remarks }}
            </div>
            <div class="content-wrap-r2">
              <div
                [ngClass]="{
                  'status-text-initiated': item.action == 'Timeout',
                  'status-text-reject': item.action == 'Pending',
                  'status-text-success': item.action == 'Closed'
                }"
              >
                {{ item.getAction() || '------' }}
              </div>
              <div class="content-wrap-r2-divider"></div>
              <div
                [ngClass]="{
                  'sla-timeout': item.getSLAvalue() < 0,
                  'sla-pending':
                    item.getSLAvalue() <= 5 && item.getSLAvalue() >= 0,
                  'sla-new': item.getSLAvalue() > 5
                }"
              >
                SLA: {{ item.getSLA() }}
              </div>
              <div class="content-wrap-r2-divider"></div>
              <div>JD:- {{ item.jobDuration }}m</div>
            </div>
          </div>
        </div>
      </ng-container>
    </ng-container>
    <ng-template #noList>
      <div *ngIf="listData" class="no-contact">
        <div class="no-contact__img">
          <img src="assets/svg/no_request.svg" alt="No Request" />
        </div>
        <div class="no-contact__title">
          No Requests
        </div>
        <div class="no-contact__description">
          When you have requests, you'll see them here
        </div>
      </div>
    </ng-template>
  </div>
</div>
<div
  class="right-side"
  [ngStyle]="
    showFilter
      ? {
          visibility: 'visible',
          width: '100%',
          marginRight: '1px solid #9eaeb8'
        }
      : { visibility: 'hidden', height: '0px', overflow: 'hidden' }
  "
>
  <hospitality-bot-request-list-filter
    [parentFG]="parentFG"
    (filterApplied)="handleFilter($event)"
    (close)="showFilter = false"
  ></hospitality-bot-request-list-filter>
</div>
