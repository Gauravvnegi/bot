<ng-container *ngIf="!isQuickReservation; else quickReservationFormGroup">
  <p-accordionTab
    header="Reservation Information"
    [selected]="!expandAccordion"
  >
    <div class="form-block">
      <ng-container [ngTemplateOutlet]="bookingInfo"> </ng-container>
    </div>
  </p-accordionTab>
</ng-container>

<ng-template #quickReservationFormGroup>
  <ng-container [ngTemplateOutlet]="bookingInfo"></ng-container>
</ng-template>

<ng-template #bookingInfo>
  <ng-container [formGroup]="parentFormGroup">
    <ng-container formGroupName="reservationInformation">
      <div class="full-width">
        <hospitality-bot-toggle-switch-with-label
          [isToggleOn]="
            reservationInfoControls?.sessionType?.value ===
            SessionType.DAY_BOOKING
          "
          (onToggleSwitch)="handelToggleSwitch($event)"
          class="switcher"
          [config]="{
            toggleOnLabel: 'Day',
            toggleOffLabel: 'Night',
            toggleOffColor: '#65b340'
          }"
          [isDisabled]="reservationInfoControls?.sessionType?.disabled"
        ></hospitality-bot-toggle-switch-with-label>
      </div>
      <hospitality-bot-date
        [ngClass]="isQuickReservation ? 'custom-width' : 'half-width'"
        controlName="from"
        label="Check-In Date"
        [settings]="{
          enableTime:
            reservationInfoControls?.sessionType?.value ===
            SessionType.DAY_BOOKING
        }"
        [props]="{
          placeholder: 'DD/MM/YY'
        }"
        [minDate]="today"
        [maxDate]="maxDate"
        [disabled]="disabledForm || isCheckedIn"
      ></hospitality-bot-date>

      <hospitality-bot-date
        *ngIf="!isDayBooking"
        [ngClass]="isQuickReservation ? 'custom-width' : 'half-width'"
        controlName="to"
        label="Check-Out Date"
        [settings]="{
          enableTime: false
        }"
        [props]="{
          placeholder: 'DD/MM/YY'
        }"
        [minDate]="minToDate"
        [maxDate]="maxDate"
        [disabled]="disabledForm || isCheckedOut"
      ></hospitality-bot-date>

      <hospitality-bot-select
        *ngIf="isDayBooking"
        [ngClass]="isQuickReservation ? 'custom-width' : 'half-width'"
        label="Hours"
        controlName="slotId"
        [options]="bookingSlotList"
        [props]="{ placeholder: 'Select Slot' }"
        [settings]="{
          optionAlignment: 'horizontal'
        }"
      >
      </hospitality-bot-select>

      <hospitality-bot-select
        *ngIf="reservationTypes.length"
        [ngClass]="isQuickReservation ? 'custom-width' : 'half-width'"
        controlName="reservationType"
        label="Reservation Type"
        [options]="reservationTypes"
        [props]="{ placeholder: 'Select' }"
      ></hospitality-bot-select>
      <hospitality-bot-select
        *ngIf="statusOptions.length"
        [ngClass]="isQuickReservation ? 'custom-width' : 'half-width'"
        controlName="status"
        label="Status"
        [options]="statusOptions"
        [props]="{ placeholder: 'Select' }"
      ></hospitality-bot-select>
      <hospitality-bot-select
        [ngClass]="isQuickReservation ? 'custom-width' : 'half-width'"
        controlName="source"
        label="Booking Source"
        [options]="configData?.source"
        [props]="{ placeholder: 'Select' }"
      ></hospitality-bot-select>
      <!-- *ngIf="!agentSource && !otaOptions.length" -->
      <hospitality-bot-input
        *ngIf="
          reservationInfoControls.source.value !== 'OTA' &&
          reservationInfoControls.source.value !== 'AGENT' &&
          reservationInfoControls.source.value !== 'COMPANY'
        "
        [ngClass]="isQuickReservation ? 'custom-width' : 'half-width'"
        controlName="sourceName"
        label="Booking Source Name"
        maxLength="60"
        [props]="{
          placeholder: 'Enter',
          errorMessages: {
            required: 'This is a required field.',
            maxlength: 'Maximum character limit is upto 60.'
          }
        }"
        (focusout)="formService.getSummary.next(true)"
        (keyup.enter)="formService.getSummary.next(true)"
      ></hospitality-bot-input>
      <hospitality-bot-select
        *ngIf="reservationInfoControls.source.value === 'OTA'"
        [ngClass]="isQuickReservation ? 'custom-width' : 'half-width'"
        controlName="otaSourceName"
        label="Booking Source Name"
        [options]="otaOptions"
        [props]="{
          placeholder: 'Select',
          errorMessages: {
            required: 'This is a required field.'
          }
        }"
      ></hospitality-bot-select>

      <hospitality-bot-quick-select
        *ngIf="reservationInfoControls.source.value === 'AGENT'"
        [ngClass]="isQuickReservation ? 'custom-width' : 'half-width select'"
        controlName="agentSourceName"
        label="Booking Source Name"
        [inputType]="'select'"
        [props]="{
          showChips: false,
          isAsync: true,
          placeholder: 'Select',
          createPrompt: '+ Add New Agent',
          selectedOption: selectedAgent,
          createType: 'sidebar'
        }"
        [apiConfig]="{
          apiEndPoint: '/api/v1/members',
          dataModel: {
            key: 'records',
            values: {
              label: 'firstName',
              value: 'id'
            }
          },
          queryParams: { type: 'AGENT' },
          searchAPIEndPoint: '/api/v1/search/members',
          searchModel: {
            response: true,
            values: {
              label: 'firstName',
              value: 'id'
            }
          },
          searchQueryParams: { type: 'AGENT' }
        }"
        [paginationConfig]="{
          isPagination: true
        }"
        (clickedOption)="agentChange($event)"
        (openSidebar)="showAgent()"
        [initItems]="
          !reservationId ||
          (reservationInfoControls?.reservationType?.value &&
            reservationInfoControls?.reservationType?.value !== 'CONFIRMED')
        "
      ></hospitality-bot-quick-select>

      <hospitality-bot-quick-select
        *ngIf="reservationInfoControls.source.value === 'COMPANY'"
        [ngClass]="isQuickReservation ? 'custom-width' : 'half-width select'"
        controlName="companySourceName"
        label="Booking Source Name"
        [inputType]="'select'"
        [props]="{
          showChips: false,
          isAsync: true,
          placeholder: 'Select',
          createPrompt: '+ Add New Company',
          selectedOption: selectedCompany,
          createType: 'sidebar'
        }"
        [apiConfig]="{
          apiEndPoint: '/api/v1/members',
          dataModel: {
            key: 'records',
            values: {
              label: 'firstName',
              value: 'id'
            }
          },
          queryParams: { type: 'COMPANY' },
          searchAPIEndPoint: '/api/v1/search/members',
          searchModel: {
            response: true,
            values: {
              label: 'firstName',
              value: 'id'
            }
          },
          searchQueryParams: { type: 'COMPANY' }
        }"
        [paginationConfig]="{
          isPagination: true
        }"
        (clickedOption)="companyChange($event)"
        (openSidebar)="showCompany()"
        [initItems]="
          !reservationId ||
          (reservationInfoControls?.reservationType?.value &&
            reservationInfoControls?.reservationType?.value !== 'CONFIRMED')
        "
      ></hospitality-bot-quick-select>

      <!-- (createMembers)="createNewAgent()" -->
      <hospitality-bot-select
        [ngClass]="isQuickReservation ? 'custom-width' : 'half-width'"
        controlName="marketSegment"
        label="Market Segment"
        [options]="configData?.marketSegment"
        [props]="{ placeholder: 'Select' }"
      ></hospitality-bot-select>
      <ng-container>
        <ng-content></ng-content>
      </ng-container>
    </ng-container>
  </ng-container>
</ng-template>

<p-sidebar
  class="sidebar"
  [(visible)]="sidebarVisible"
  position="right"
  [showCloseIcon]="false"
>
  <ng-container #sidebarSlide></ng-container>
</p-sidebar>
