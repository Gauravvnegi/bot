<div class="details-wrapper">
  <div class="header">
    <div class="close">
      <i class="fa fa-times" aria-hidden="true"></i>
    </div>
    <div class="name-details" *ngIf="primaryGuest">
      <div class="name">
        <span
          >{{ primaryGuest.get('title').value
          }}{{ primaryGuest.get('firstName').value
          }}{{ primaryGuest.get('lastName').value }}</span
        >
        <div class="svg-wrapper">
          <svg
            class="svg"
            id="Capa_1"
            enable-background="new 0 0 515.556 515.556"
            height="512"
            viewBox="0 0 515.556 515.556"
            width="512"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="m348.918 37.751c50.334 50.334 50.334 131.942 0 182.276s-131.942 50.334-182.276 0-50.334-131.942 0-182.276c50.334-50.335 131.942-50.335 182.276 0"
            />
            <path
              d="m455.486 350.669c-117.498-79.391-277.917-79.391-395.415 0-17.433 11.769-27.848 31.656-27.848 53.211v111.676h451.111v-111.676c0-21.555-10.416-41.442-27.848-53.211z"
            />
          </svg>
          <span>{{ stayDetailsForm.get('adultsCount').value }}</span>
        </div>
        <div class="svg-wrapper">
          <svg
            class="svg"
            id="Capa_1"
            enable-background="new 0 0 515.556 515.556"
            height="512"
            viewBox="0 0 515.556 515.556"
            width="512"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="m348.918 37.751c50.334 50.334 50.334 131.942 0 182.276s-131.942 50.334-182.276 0-50.334-131.942 0-182.276c50.334-50.335 131.942-50.335 182.276 0"
            />
            <path
              d="m455.486 350.669c-117.498-79.391-277.917-79.391-395.415 0-17.433 11.769-27.848 31.656-27.848 53.211v111.676h451.111v-111.676c0-21.555-10.416-41.442-27.848-53.211z"
            />
          </svg>
          <span>{{ stayDetailsForm.get('kidsCount').value }}</span>
        </div>
      </div>
      <div class="header-seperator"></div>
      <div class="booking-id">
        {{ reservationDetailsForm.get('bookingId').value }}
      </div>
      <div class="header-seperator"></div>

      <div class="room-details">
        {{ reservationDetailsForm.get('roomNumber').value }}-
        {{ stayDetailsForm.get('roomType').value }}
      </div>
    </div>
    <div class="contact-details" *ngIf="primaryGuest">
      <div class="call">
        <mat-icon class="material-icons" matSuffix>call</mat-icon
        >{{ primaryGuest.get('countryCode').value
        }}{{ primaryGuest.get('phoneNumber').value }}
      </div>

      <div class="email">
        <mat-icon class="material-icons" matSuffix>email</mat-icon
        >{{ primaryGuest.get('email').value }}
      </div>
    </div>
    <div class="options-wrapper">
      <button class="check-button">
        <mat-icon class="material-icons" matSuffix>check_circle</mat-icon>
        <p class="text">Reg card</p>
      </button>
      <button class="check-button">
        <mat-icon class="material-icons" matSuffix>check_circle</mat-icon>
        <p class="text">Health Declaration</p>
      </button>
      <p-dropdown [options]="items">
        <ng-template let-item pTemplate="selectedItem">
          <span style="vertical-align: middle; margin-left: 5px;"
            >Current Booking</span
          >
        </ng-template>
      </p-dropdown>
    </div>
  </div>
  <div class="mat-group">
    <mat-tab-group>
      <mat-tab label="Guest Details">
        <form class="form-wrapper" [formGroup]="guestDetailsForm">
          <div class="left">
            <mat-label class="mat-head">Guest Info</mat-label>
            <ng-container
              formArrayName="guests"
              *ngFor="
                let guestFormGroup of guestDetailsForm.controls.guests?.value;
                let i = index
              "
            >
              <div class="feilds-wrapper" [formGroupName]="i">
                <div class="feild width-added">
                  <mat-label class="label">Full Name</mat-label>
                  <div class="value">
                    {{ guestFormGroup.title }}
                    {{ guestFormGroup.firstName }}
                    {{ guestFormGroup.lastName }}
                  </div>
                </div>
                <div class="feild width-added">
                  <mat-label class="label">Phone No.</mat-label>
                  <div class="value">
                    {{ guestFormGroup.countryCode }}
                    {{ guestFormGroup.phoneNumber }}
                  </div>
                </div>
                <div class="feild width-added">
                  <mat-label class="label">Email</mat-label>
                  <div class="value">
                    {{ guestFormGroup.email }}
                  </div>
                </div>
              </div>
            </ng-container>
            <hr class="data-seperator" />
            <mat-label class="mat-head">Stay Details</mat-label>
            <ng-container>
              <div class="feilds-wrapper">
                <div class="feild width-quarter">
                  <mat-label class="label">Arrival Date</mat-label>
                  <div class="value">
                    {{ stayDetailsForm.get('arrivalTime').value }}
                  </div>
                </div>
                <div class="feild width-quarter">
                  <mat-label class="label">Departure Date</mat-label>
                  <div class="value">
                    {{ stayDetailsForm.get('departureTime').value }}
                  </div>
                </div>
                <div class="feild width-quarter">
                  <mat-label class="label">Expected Arrival Time</mat-label>
                  <div class="value">
                    {{ stayDetailsForm.get('expectedArrivalTime').value }}
                  </div>
                </div>
                <div class="feild width-quarter">
                  <mat-label class="label">Room Type</mat-label>
                  <div class="value">
                    {{ stayDetailsForm.get('roomType').value }}
                  </div>
                </div>
              </div>
            </ng-container>
            <hr class="data-seperator" />
            <mat-label class="mat-head">Health Declaration</mat-label>
            <ng-container>
              <p class="health-status">
                Health Declaration Status :&nbsp;<b>Accepted</b>
              </p>
            </ng-container>
          </div>
        </form>
      </mat-tab>
      <mat-tab label="Documents">
        <div class="material-body" *ngIf="guestDetails">
          <div>
            <mat-form-field>
              <mat-select
                [(value)]="selectedGuestId"
                (selectionChange)="onGuestChange($event.value)"
              >
                <mat-option
                  *ngFor="let guest of guestDetails.guestDetails"
                  [value]="guest.id"
                >
                  {{ guest.firstName }}{{ guest.lastName }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div>
            <form [formGroup]="selectedGuestGroup">
              <ng-container
                formArrayName="documents"
                *ngFor="
                  let document of selectedGuestGroup.get('documents').controls;
                  let i = index
                "
              >
                <div [formGroupName]="i">
                  {{ document.getRawValue() | json }}
                  <div>
                    Verification Status: Fail<mat-slide-toggle
                      formControlName="verificationStatus"
                    ></mat-slide-toggle>
                    Pass
                  </div>
                  <div>
                    <img [src]="document.get('frontUrl').value" />
                    <span>
                      {{ document.get('documentType').value }} FIRST PAGE
                    </span>
                  </div>
                  <div *ngIf="document.get('documentType').value != 'VISA'">
                    <img [src]="document.get('backUrl').value" />
                    <span>
                      {{ document.get('documentType').value }} BACK PAGE
                    </span>
                  </div>
                  <mat-form-field>
                    <mat-label>Add Remark:</mat-label>
                    <input matInput formControlName="remark" />
                  </mat-form-field>
                </div>
              </ng-container>
            </form>
          </div>
        </div>
      </mat-tab>
      <mat-tab label="Package">
        <!-- <div class="material-body">
        <mat-label>Complementary</mat-label>
        <mat-label>Paid</mat-label>
      </div> -->
      </mat-tab>

      <mat-tab label="Payment">
        <div class="material-body">
          <div>
            <mat-label>Payment Summary</mat-label>
            <div>
              <mat-label>Billed to:</mat-label>
              <span>
                {{ paymentDetailsForm.get('title').value }}
                {{ paymentDetailsForm.get('firstName').value }}
                {{ paymentDetailsForm.get('lastName').value }}
              </span>
              <mat-label>Arrival Date:</mat-label>
              <span>
                {{ paymentDetailsForm.get('arrivalTime').value }}
              </span>
              <mat-label>Current Date:</mat-label>
              <span>
                {{ paymentDetailsForm.get('currentDate').value }}
              </span>
            </div>
            <div>
              <mat-label>Room No.</mat-label>
              <span>{{ paymentDetailsForm.get('roomNumber').value }}</span>
              <mat-label>Departure Date:</mat-label>
              <span>{{ paymentDetailsForm.get('departureTime').value }}</span>
              <mat-label>Booking No.:</mat-label>
              <span>{{ paymentDetailsForm.get('bookingId').value }}</span>
            </div>
            <div>
              <mat-label>Room Type:</mat-label>
              <span>{{ paymentDetailsForm.get('roomType').value }}</span>
              <mat-label>No. of Adults:</mat-label>
              <span>{{ paymentDetailsForm.get('adultsCount').value }}</span>
            </div>
            <div>
              <mat-label>No. of Rooms:</mat-label>
              <span>{{ paymentDetailsForm.get('roomsCount').value }}</span>
              <mat-label>No. of Children:</mat-label>
              <span>{{ paymentDetailsForm.get('kidsCount').value }}</span>
            </div>
          </div>
          <div>
            <mat-accordion>
              <mat-expansion-panel>
                <mat-expansion-panel-header>
                  <mat-panel-title>
                    Payment Detail
                  </mat-panel-title>
                </mat-expansion-panel-header>
                <table mat-table [dataSource]="dataSource">
                  <ng-container matColumnDef="description">
                    <th mat-header-cell *matHeaderCellDef>Description</th>
                    <td mat-cell *matCellDef="let element">
                      {{ element.description }}
                    </td>
                  </ng-container>

                  <ng-container matColumnDef="unit">
                    <th mat-header-cell *matHeaderCellDef>Unit</th>
                    <td mat-cell *matCellDef="let element">
                      {{ element.unit }}
                    </td>
                  </ng-container>

                  <ng-container matColumnDef="unitPrice">
                    <th mat-header-cell *matHeaderCellDef>Unit Price</th>
                    <td mat-cell *matCellDef="let element">
                      {{ element.unitPrice }}
                    </td>
                  </ng-container>

                  <ng-container matColumnDef="amount">
                    <th mat-header-cell *matHeaderCellDef>Amount</th>
                    <td mat-cell *matCellDef="let element">
                      {{ element.amount }}
                    </td>
                  </ng-container>

                  <ng-container matColumnDef="CGST">
                    <th mat-header-cell *matHeaderCellDef>CGST</th>
                    <td mat-cell *matCellDef="let element">
                      {{ element.CGST }}
                    </td>
                  </ng-container>

                  <ng-container matColumnDef="SGST">
                    <th mat-header-cell *matHeaderCellDef>SGST</th>
                    <td mat-cell *matCellDef="let element">
                      {{ element.SGST }}
                    </td>
                  </ng-container>

                  <ng-container matColumnDef="discount">
                    <th mat-header-cell *matHeaderCellDef>Discount</th>
                    <td mat-cell *matCellDef="let element">
                      {{ element.discount }}
                    </td>
                  </ng-container>

                  <ng-container matColumnDef="totalAmount">
                    <th mat-header-cell *matHeaderCellDef>Total Amount</th>
                    <td mat-cell *matCellDef="let element">
                      {{ element.totalAmount }}
                    </td>
                  </ng-container>

                  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                  <tr
                    mat-row
                    *matRowDef="let row; columns: displayedColumns"
                  ></tr>
                </table>
              </mat-expansion-panel>
            </mat-accordion>
          </div>
        </div>
      </mat-tab>
    </mat-tab-group>
    <div class="tab-buttons">
      <div class="button-wrapper">
        <button class="button">Confirm Details</button>
        <button class="button gap">View Docs</button>
      </div>
      <div class="right-bottom-icons">
        <div class="social-icons">
          <i class="fas fa-paper-plane icon"></i>
        </div>
        <div class="social-icons">
          <i class="fas fa-paper-plane icon"></i>
        </div>
        <div class="social-icons">
          <i class="fas fa-paper-plane icon"></i>
        </div>
        <div class="social-icons">
          <i class="fas fa-paper-plane icon"></i>
        </div>
      </div>
    </div>
  </div>
</div>
