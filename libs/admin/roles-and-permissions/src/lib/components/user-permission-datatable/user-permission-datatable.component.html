<div class="details_wrapper">
  <div [formGroup]="tableFG">
    <hospitality-bot-modal-header
      [tableName]="tableName"
      (onModalClose)="closeModal()"
    >
      <hospitality-bot-export-list
        (onDocumentActions)="onDocumentActions()"
        [documentTypes]="documentTypes"
        [documentActionTypes]="documentActionTypes"
        [isDisable]="values.length === 0"
      ></hospitality-bot-export-list>
    </hospitality-bot-modal-header>
  </div>

  <div
    class="table-container"
    [ngStyle]="tabFilterItems[tabFilterIdx]?.total ? {} : { padding: '10px' }"
  >
    <p-table
      #dt
      [styleClass]="tableConfig.styleClass"
      [resizableColumns]="isResizableColumns"
      [autoLayout]="isAutoLayout"
      [loading]="loading"
      [columns]="cols"
      [value]="values"
      [paginator]="isPaginator"
      [rows]="rowsPerPage"
      [showCurrentPageReport]="showCurrentPageReport"
      [rowsPerPageOptions]="rowsPerPageOptions"
      currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
      [(first)]="first"
      [totalRecords]="totalRecords"
      [filterDelay]="0"
      [(selection)]="selectedRows"
      (onRowSelect)="onRowSelect($event)"
      (onRowUnselect)="onRowUnselect($event)"
      (sortFunction)="customSort($event)"
      [customSort]="isCustomSort"
    >
      <ng-template pTemplate="caption">
        <div class="caption__wrapper" [formGroup]="tableFG">
          <hospitality-bot-tab-group
            *ngIf="isTabFilters"
            [listItems]="tabFilterItems"
            [selectedIndex]="tabFilterIdx"
            (selectedTabChange)="onSelectedTabFilterChange($event)"
          ></hospitality-bot-tab-group>
          <hospitality-bot-filter-chips
            *ngIf="isQuickFilters"
            [chips]="filterChips"
            (onChange)="toggleQuickReplyFilter($event)"
            [selectedChips]="selectedFilterChips"
          ></hospitality-bot-filter-chips>
        </div>
      </ng-template>

      <ng-template pTemplate="emptymessage">
        <tr hospitality-bot-empty-view [noOfColumns]="cols.length"></tr>
      </ng-template>
      <!-- *******************************HEADER WITH SEARCH******************************* -->
      <ng-template pTemplate="header" let-columns>
        <tr
          hospitality-bot-table-header
          [columns]="columns"
          [showCheckbox]="isSelectable"
          (search)="handleFieldSearch($event)"
        ></tr>
      </ng-template>
      <!-- **************************************BODY********************************* -->
      <ng-template
        pTemplate="body"
        let-rowData
        let-columns="columns"
        let-rowIndex="rowIndex"
      >
        <tr
          class="table-row"
          [ngClass]="{
            disabled: isEditAccessDenied(rowData)
          }"
          (click)="openUserDetails(rowData)"
        >
          <td class="table-row__checkbox">
            <p-tableCheckbox
              [value]="rowData"
              [index]="rowIndex"
              (click)="onCheckboxClicked($event)"
            ></p-tableCheckbox>
          </td>
          <td>
            <div class="cell-content">
              <div class="primary-text">{{ rowData.getFullName() }}</div>
              <div class="secondary-text">
                <p>{{ rowData.getContactDetails() }}</p>
                <p>{{ rowData.email }}</p>
              </div>
            </div>
          </td>
          <td>
            <div class="cell-content">
              <div class="primary-text">
                {{ rowData.getDepartments() }}
              </div>
            </div>
          </td>
          <td>
            <div class="cell-content">
              <div class="primary-text">
                {{ rowData.jobTitle }}
              </div>
            </div>
          </td>
          <td>
            <div class="cell-content">
              <hospitality-bot-status-dropdown-toggle
                class="toggle-btn"
                (onClick)="handelStatus($event, rowData)"
                [state]="rowData.status"
                [disabled]="isEditAccessDenied(rowData)"
              >
              </hospitality-bot-status-dropdown-toggle>
            </div>
          </td>
        </tr>
      </ng-template>
      <!-- *********************************FOOTER******************************* -->
      <ng-template pTemplate="summary">
        <p-paginator
          #paginator
          [rows]="rowsPerPage"
          [totalRecords]="totalRecords"
          [rowsPerPageOptions]="rowsPerPageOptions"
          (onPageChange)="paginate($event)"
          [currentPageReportTemplate]="reportTemplate"
          showCurrentPageReport="true"
        ></p-paginator>
      </ng-template>
    </p-table>
  </div>
</div>
