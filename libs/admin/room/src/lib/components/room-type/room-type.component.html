<div class="wrapper">
  <hospitality-bot-custom-header
    label="Add a Room Type"
  ></hospitality-bot-custom-header>
  <form [formGroup]="addRoomTypeForm">
    <div class="wrapper-form">
      <mat-label class="mat-label">Type Name :</mat-label>
      <mat-form-field class="room-type-name">
        <input
          class="input-field"
          type="text"
          placeholder=""
          matInput
          spellcheck="false"
          formControlName="name"
        />
      </mat-form-field>
    </div>

    <div class="upload-image">
      <div class="upload-image-text">
        Room's Images* : (Uploading at least 1 image is mandatory)
      </div>
      <hospitality-bot-custom-file-upload
        formControlName="imageUrls"
        [multipleFileUpload]="true"
      ></hospitality-bot-custom-file-upload>
    </div>
    <p class="upload-image-note">Recommended Ratio : 16:9 | 1 MB Max Size</p>
    <div class="room-description">
      <div class="room-description-text">
        Room Description:
      </div>
      <div class="ck-editor">
        <hospitality-bot-template-editor
          [parentFG]="addRoomTypeForm"
          [name]="'description'"
        ></hospitality-bot-template-editor>
      </div>
    </div>

    <div class="amenities">
      <div class="amenities-text">
        Amenities : (Complimentary)
      </div>
      <hospitality-bot-custom-select
        formControlName="complimentaryAmenities"
        [itemList]="compAmenities"
        [selectProperties]="selectProperty"
      ></hospitality-bot-custom-select>
    </div>
    <div class="amenities">
      <div class="amenities-text">
        Amenities : (Paid)
      </div>
      <hospitality-bot-custom-select
        formControlName="paidAmenities"
        [itemList]="paidAmenities"
        [selectProperties]="selectProperty"
        [paid]="true"
      ></hospitality-bot-custom-select>
    </div>

    <div class="bottom-form-fields">
      <div class="field">
        <mat-label class="label">Base Price:</mat-label>
        <mat-form-field class="currency">
          <mat-select formControlName="currency">
            <mat-option
              *ngFor="let currency of currency"
              [value]="currency.key"
              >{{ currency.value }}</mat-option
            >
          </mat-select>
        </mat-form-field>
        <mat-form-field>
          <input
            type="number"
            formControlName="originalPrice"
            matInput
            autocomplete="off"
          />
        </mat-form-field>
      </div>

      <div class="field">
        <mat-label class="label"
          >Variable Price:<mat-icon
            matTooltip="Enter extra occupancy charge per occupant"
            class="info-icon"
            >info</mat-icon
          ></mat-label
        >
        <mat-form-field class="currency">
          <mat-select formControlName="variablePriceCurrency">
            <mat-option
              *ngFor="let currency of currency"
              [value]="currency.value"
              >{{ currency.key }}</mat-option
            >
          </mat-select>
        </mat-form-field>
        <mat-form-field>
          <input matInput autocomplete="off" formControlName="variablePrice" />
        </mat-form-field>
      </div>
    </div>
    <div class="bottom-form-fields">
      <div class="field">
        <mat-label class="label">Discount Type:</mat-label>
        <mat-form-field class="currency">
          <mat-select formControlName="discountType">
            <mat-option *ngFor="let dis of discount" [value]="dis.value">{{
              dis.key
            }}</mat-option>
          </mat-select>
        </mat-form-field>
        <mat-form-field>
          <input
            type="number"
            formControlName="discountTypeValue"
            matInput
            autocomplete="off"
          />
          <mat-error
            *ngIf="
              addRoomTypeForm.controls['discountTypeValue'].hasError('max')
            "
            >Percentage can not be more than 100</mat-error
          >
          <mat-error
            *ngIf="
              addRoomTypeForm.controls['discountTypeValue'].hasError(
                'incorrect'
              )
            "
            >Amount can not be more than base price</mat-error
          >
        </mat-form-field>
      </div>
      <div class="field">
        <mat-label class="label">Discounted Price:</mat-label>
        <mat-form-field class="currency">
          <mat-select formControlName="discountedPriceCurrency">
            <mat-option
              *ngFor="let currency of currency"
              [value]="currency.value"
              >{{ currency.key }}</mat-option
            >
          </mat-select>
        </mat-form-field>
        <mat-form-field>
          <input
            formControlName="discountedPrice"
            matInput
            autocomplete="off"
          />
        </mat-form-field>
      </div>
    </div>
    <div class="bottom-form-fields">
      <div class="field">
        <mat-label class="label">Max Occupancy:</mat-label>
        <mat-form-field class="input">
          <input
            type="number"
            matInput
            placeholder="Enter Max Occupancy"
            formControlName="maxOccupancy"
          />
        </mat-form-field>
      </div>
      <div class="field">
        <mat-label class="label">Max Children:</mat-label>
        <mat-form-field class="input">
          <input
            type="number"
            matInput
            placeholder="Enter Max Kid Occupancy"
            formControlName="maxChildren"
          />
        </mat-form-field>
      </div>
    </div>
    <div class="bottom-form-fields">
      <div class="field">
        <mat-label class="label">Max Adult:</mat-label>
        <mat-form-field class="input">
          <input
            type="number"
            matInput
            placeholder="Enter Max Adult Occupancy"
            formControlName="maxAdult"
          />
          <mat-error
            *ngIf="addRoomTypeForm.controls['maxAdult'].hasError('incorrect')"
            >Max adult can not be more than max occupancy</mat-error
          >
        </mat-form-field>
      </div>
      <div class="field">
        <mat-label class="label">Room Area:</mat-label>
        <mat-form-field class="input">
          <input
            type="number"
            matInput
            placeholder="Enter Room Area"
            formControlName="area"
          />
        </mat-form-field>
        (sqft.)
      </div>
    </div>
  </form>
  <div class="footer_button" *ngIf="mode == 'Save'">
    <button mat-button (click)="saveDetails()">
      <i *ngIf="isSavingDetails" class="fa fa-spinner fa-spin"></i>
      {{ isSavingDetails ? 'Saving Details' : 'Save' }}
    </button>
  </div>

  <div class="footer_button" *ngIf="mode == 'Update'">
    <button mat-button (click)="updateDetails()">
      <i *ngIf="isUpdatingDetails" class="fa fa-spinner fa-spin"></i>
      {{ isUpdatingDetails ? 'Updating Details' : 'Update' }}
    </button>
  </div>
</div>
