<ng-container [formGroup]="controlContainer.control">
  <div class="form__wrapper" [formArrayName]="controlName">
    <div class="form form__header form__sticky-header">
      <div class="form__item order">Order</div>
      <div class="form__item plan-type">{{ planTypeLabel }}</div>
      <div class="form__item parent-plan">Parent</div>
      <div class="form__item modifier-price">{{ modifierPriceLabel }}</div>
      <div class="form__item modifier-level">Modifier Level</div>
    </div>
    <div
      class="form form__fields"
      *ngFor="let control of inputArrayControl; let i = index"
      [formGroupName]="i"
    >
      <div class="form__item order">{{ i === 0 ? 'Base' : i + 1 }}</div>
      <div class="form__item plan-type">
        {{ control.get('name').value }}
      </div>

      <div class="form__item parent-plan">
        <hospitality-bot-select
          *ngIf="i !== 0; else showDash"
          controlName="parentPlan"
          [options]="planOptions"
        ></hospitality-bot-select>
      </div>

      <div class="form__item modifier-price">
        <hospitality-bot-prefix-field
          class="form__item"
          preControlName="currency"
          postControlName="modifierPrice"
          [options]="currencies"
          [props]="{
            placeholder: 'Enter'
          }"
          [defaultProps]="{ post: { type: 'number' } }"
          [disabled]="i === 0"
        ></hospitality-bot-prefix-field>
      </div>
      <div class="form__item modifier-level">
        <ng-container *ngIf="i !== 0; else showDash">
          <div
            class="modifier-level"
            [ngClass]="{
              positive: modifierValue > 0,
              negative: modifierValue < 0
            }"
            *ngIf="control.get('modifierLevel').value as modifierValue"
          >
            <div>
              {{ modifierValue | math: 'abs' }}
            </div>
            <i
              class="pi"
              [ngClass]="{
                'pi-arrow-up': modifierValue > 0,
                'pi-arrow-down': modifierValue < 0
              }"
            ></i>
          </div>
        </ng-container>
      </div>
    </div>
  </div>
</ng-container>

<ng-template #showDash>
  <div class="form__item">-</div>
</ng-template>
