<div class="wrapper">
  <div
    #myBounds
    [ngStyle]="{
      width: noOfColumn * cellSize + 'px',
      height: noOfRow * cellSize + 'px'
    }"
  >
    <ng-container *ngFor="let row of gridRows; let rowIdx = index">
      <ng-container *ngFor="let col of gridColumns; let colIdx = index">
        <div
          class="drag-grid"
          [bounds]="myBounds"
          [rzContainment]="myBounds"
          [inBounds]="true"
          *ngIf="data[row] && data[row][col]"
          ngDraggable
          ngResizable
          [rzMinWidth]="cellSize / 2"
          [rzGrid]="cellSize / 2"
          [position]="{
            x: colIdx * cellSize + (data[row][col]?.hasPrev ? cellSize / 2 : 0),
            y: rowIdx * cellSize
          }"
          [gridSize]="cellSize / 2"
          [ngStyle]="{
            width:
              getWidth({
                rowValue: row,
                colValue: col,
                colIdx: colIdx,
                rowIdx: rowIdx
              }) + 'px',
            height: cellSize + 'px',
            padding: cellGap + 'px'
          }"
          zIndex="100"
          zIndexMoving="1000"
          [preventDefaultEvent]="true"
          rzHandles="e,w"
          (rzStop)="
            handleResizing($event, {
              rowValue: row,
              colValue: col,
              colIdx: colIdx,
              rowIdx: rowIdx
            })
          "
          (endOffset)="
            handleDrag($event, {
              rowValue: row,
              colValue: col,
              colIdx: colIdx,
              rowIdx: rowIdx
            })
          "
        >
          <div
            class="cell-data"
            [ngStyle]="{
              height: cellSize - 2 * cellGap + 'px'
            }"
          >
            {{ data[row][col]?.content }}
          </div>
        </div>
      </ng-container>
    </ng-container>
  </div>

  <!-- for grid view -->
  <div
    class="grid-container"
    [ngStyle]="{ width: noOfColumn * cellSize + 'px' }"
  >
    <div
      *ngFor="let row of gridRows; let rowIdx = index"
      class="grid-row"
      [id]="'myContainment_' + i"
    >
      <div
        *ngFor="let col of gridColumns; let colIdx = index"
        class="grid-cell"
        [ngStyle]="{
          width: cellSize + 'px',
          height: cellSize + 'px'
        }"
      >
        <div
          [ngDraggable]="false"
          [preventDefaultEvent]="true"
          class="non-drag-grid"
          zIndex="1"
          [ngStyle]="{
            width: cellSize - 2 * cellGap + 'px',
            height: cellSize - 2 * cellGap + 'px',
            margin: cellGap + 'px'
          }"
        >
          <ng-container *ngIf="devMode && rowIdx === gridRows.length - 1">
            <div>
              {{ colIdx }}
            </div>
            <div>
              {{ col }}
            </div>
          </ng-container>
        </div>
      </div>
    </div>
  </div>
</div>

<ng-container *ngIf="devMode">
  <h2>{{ eventData | json }}</h2>
</ng-container>
