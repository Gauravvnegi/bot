<div *ngIf="regCardLoading"><web-user-loader></web-user-loader></div>
<ng-template #loader>
  <div>
    <p class="loading">Loading Summary</p>
    <div class="spinner">
      <div class="bounce1"></div>
      <div class="bounce2"></div>
      <div class="bounce3"></div>
    </div>
  </div>
</ng-template>
<ng-container *ngIf="!isLoaderVisible; else loader">
  <div class="status--heading">
    <div class="heading">Status:&nbsp;<b class="status">Active</b></div>
    <div class="icon-wrapper">
      <img src="assets/svg/Download.svg" (click)="downloadSummary()" />
      <img src="assets/svg/print.svg" (click)="printSummary()" />
    </div>
  </div>
  <div #content>
    <div *ngIf="guestDetail && guestDetail.guests.length">
      <div class="section--heading">Guest Details</div>
      <div class="section--content" *ngFor="let guest of guestDetail.guests">
        <div class="section--content--container min-width">
          <div class="section--content--container--title">
            {{ guest.type === 'primary' ? 'Full Name (Primary)' : 'Full Name' }}
          </div>
          <div class="section--content--container--value">
            {{ guest.nameTitle }}
            {{ guest.firstName }}
            {{ guest.lastName }}
          </div>
        </div>
        <div class="section--content--container min-width">
          <div class="section--content--container--title">Phone No.</div>
          <div class="section--content--container--value">
            {{
              guest.contactDetails.mobileNumber
                ? guest.contactDetails.cc +
                  ' ' +
                  guest.contactDetails.mobileNumber
                : '-'
            }}
          </div>
        </div>
        <div class="section--content--container min-width">
          <div class="section--content--container--title">Email ID</div>
          <div class="section--content--container--value">
            {{ guest.contactDetails.emailId || '-' }}
          </div>
        </div>
      </div>
    </div>
    <div *ngIf="stayDetail">
      <div class="section--heading">Stay Details</div>
      <div class="section--content">
        <div class="section--content--container">
          <div class="section--content--container--title">Arrival Date</div>
          <div class="section--content--container--value">
            {{ stayDetail.getArrivalTime(_hotelService.hotelConfig.timezone) }}
          </div>
        </div>
        <div class="section--content--container">
          <div class="section--content--container--title">Departure Date</div>
          <div class="section--content--container--value">
            {{
              stayDetail.getDepartureTime(_hotelService.hotelConfig.timezone)
            }}
          </div>
        </div>
        <div class="section--content--container">
          <div class="section--content--container--title">Room Type</div>
          <div class="section--content--container--value">
            {{ stayDetail.roomType }}
          </div>
        </div>
        <div class="section--content--container">
          <div class="section--content--container--title">Room Occupancy</div>
          <div class="section--content--container--value--container">
            <div class="element">Adults: {{ stayDetail.adultsCount }}</div>
            <div>Kids: {{ stayDetail.kidsCount }}</div>
          </div>
        </div>
      </div>
    </div>
    <div>
      <div
        class="section--heading"
        [ngClass]="{
          'status-failed':
            summaryDetails.guestDetails.guests[0].statusMessage.status !==
            'COMPLETED',
          'status-completed':
            summaryDetails.guestDetails.guests[0].statusMessage.status ===
            'COMPLETED'
        }"
      >
        <img
          class="conditional-icon"
          [src]="
            summaryDetails.guestDetails.guests[0].statusMessage.status ===
            'COMPLETED'
              ? 'assets/Right.png'
              : 'assets/Info.png'
          "
          alt="info"
        />
        Documents
      </div>
      <div class="section--content">
        <div class="section--content--label">
          <ng-container
            [ngSwitch]="
              summaryDetails.guestDetails.guests[0].statusMessage.status
            "
          >
            <ng-container *ngSwitchCase="'PENDING'">
              <div class="section--content--health--message-detail">
                Documents are pending.
              </div>
            </ng-container>
            <ng-container *ngSwitchCase="'INITIATED'">
              <div class="section--content--health--message-detail">
                Documents verification initiated.
              </div>
            </ng-container>
            <ng-container *ngSwitchCase="'COMPLETED'">
              <div class="section--content--health--message-detail">
                Documents verification successful.
              </div>
            </ng-container>
            <ng-container *ngSwitchCase="'FAILED'">
              <div class="section--content--health--message-detail">
                Documents verification failed.
              </div>
            </ng-container>
          </ng-container>
        </div>
      </div>
      <div
        class="error_message"
        *ngIf="
          summaryDetails.guestDetails.guests[0].statusMessage.status ===
          'FAILED'
        "
      >
        {{ summaryDetails.guestDetails.guests[0].statusMessage.remarks }}
      </div>
    </div>
    <div>
      <div
        class="section--heading"
        [ngClass]="{
          'status-failed':
            summaryDetails.healthDeclaration.statusMessage.status !==
            'COMPLETED',
          'status-completed':
            summaryDetails.healthDeclaration.statusMessage.status ===
            'COMPLETED'
        }"
      >
        <img
          class="conditional-icon"
          [src]="
            summaryDetails.healthDeclaration.statusMessage.status ===
            'COMPLETED'
              ? 'assets/Right.png'
              : 'assets/Info.png'
          "
          alt="info"
        />
        Health Declaration
      </div>
      <div class="section--content--health">
        <div class="section--content--health--message">
          <ng-container
            [ngSwitch]="summaryDetails.healthDeclaration.statusMessage.status"
          >
            <ng-container *ngSwitchCase="'PENDING'">
              <div class="section--content--health--message-detail">
                Health Declaration Pending.
              </div>
            </ng-container>
            <ng-container *ngSwitchCase="'INITIATED'">
              <div class="section--content--health--message-detail">
                Health Declaration Initiated.
              </div>
            </ng-container>
            <ng-container *ngSwitchCase="'COMPLETED'">
              <div class="section--content--health--message-detail">
                Health Declaration has been signed.
              </div>
            </ng-container>
            <ng-container *ngSwitchCase="'FAILED'">
              <div class="section--content--health--message-detail">
                Health Declaration verification failed.
              </div>
            </ng-container>
          </ng-container>
        </div>
        <div
          class="error_message"
          *ngIf="
            summaryDetails.healthDeclaration.statusMessage.status === 'FAILED'
          "
        >
          {{ summaryDetails.healthDeclaration.statusMessage.remarks }}
        </div>
        <div class="section--content--health--disclaimer">
          Disclaimer: Health Declaration Form will be validated at Front Desk
          the time of Check-in. To ensure safety of all customers, Hotel holds
          the right to take appropriate action as per the outcome.
        </div>
      </div>
    </div>
    <div>
      <div
        class="section--heading"
        [ngClass]="{
          'status-failed':
            summaryDetails.paymentSummary.statusMessage.status !== 'COMPLETED',
          'status-completed':
            summaryDetails.paymentSummary.statusMessage.status === 'COMPLETED'
        }"
      >
        <img
          class="conditional-icon"
          [src]="
            summaryDetails.paymentSummary.statusMessage.status === 'COMPLETED'
              ? 'assets/Right.png'
              : 'assets/Info.png'
          "
          alt="info"
        />
        Payment Info
      </div>
      <div class="section--content amount">
        <div class="section--content--label">
          <ng-container
            [ngSwitch]="summaryDetails.paymentSummary.statusMessage.status"
          >
            <ng-container *ngSwitchCase="'PENDING'">
              <div class="section--content--health--message-detail">
                Payment Pending.
              </div>
            </ng-container>
            <ng-container *ngSwitchCase="'INITIATED'">
              <div class="section--content--health--message-detail">
                Payment Initiated.
              </div>
            </ng-container>
            <ng-container *ngSwitchCase="'COMPLETED'">
              <div class="section--content--health--message-detail">
                Payment Success.
              </div>
            </ng-container>
            <ng-container *ngSwitchCase="'FAILED'">
              <div class="section--content--health--message-detail">
                Payment Failed.
              </div>
            </ng-container>
          </ng-container>
        </div>
        <div class="section--content--label amount__pay">
          Payable Amount :&nbsp;<span
            >{{ currencyCode }}
            {{ paymentDetails ? paymentDetails.payableAmount : 0 }}</span
          >
        </div>
      </div>
      <div
        class="section--content"
        *ngIf="summaryDetails.paymentSummary.statusMessage.status === 'FAILED'"
      >
        {{ summaryDetails.paymentSummary.statusMessage.remarks }}
      </div>
    </div>
    <div>
      <div
        class="section--heading"
        [ngClass]="{
          'status-failed': !isRegSigned,
          'status-completed': isRegSigned
        }"
      >
        <img
          class="conditional-icon"
          [src]="isRegSigned ? 'assets/Right.png' : 'assets/Info.png'"
          alt="reg"
        />
        Registration Card
      </div>
      <div class="section--content">
        <div class="section--content--label">
          <div style="margin-left: 10px;">
            <label>
              Verify
              <span class="link" (click)="openRegCard()"
                >Registration Card</span
              ></label
            >
          </div>
        </div>
      </div>
    </div>
    <div>
      <div class="section--heading">Privacy Policy</div>
      <div class="section--content privacy-checkbox">
        <div
          class="section--content--label"
          *ngIf="summaryFG?.get('privacyPolicy')"
        >
          <web-user-checkbox
            [parentForm]="summaryFG?.get('privacyPolicy')"
            [name]="'accept'"
            (onValueChange)="setPrivacyPolicy($event)"
            [settings]="{
              label: 'I agree to receive promotions on my email and phone no'
            }"
          >
          </web-user-checkbox>
        </div>
      </div>
    </div>
  </div>
</ng-container>
