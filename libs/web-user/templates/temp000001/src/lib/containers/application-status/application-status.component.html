<ng-template #loader>
  <div>
    <p class="loading">Loading Summary</p>
    <div class="spinner">
      <div class="bounce1"></div>
      <div class="bounce2"></div>
      <div class="bounce3"></div>
    </div>
  </div>
</ng-template>
<ng-container *ngIf="!isLoaderVisible; else loader">
  <div class="status--heading">
    <div>Status: Active</div>
    <div></div>
    <div class="print_download">
      <mat-icon (click)="printSummary()">{{ 'cloud_download_outline' }}</mat-icon>
    </div>
  </div>
  <div #content>
    <div>
      <div class="section--heading">Guest Details</div>
      <div class="section--content">
        <div class="section--content--container">
          <div class="section--content--container--title">Full Name (Primary)</div>
          <div class="section--content--container--value">
            {{ guestDetail.primaryGuest.nameTitle }}{{ guestDetail.primaryGuest.firstName }} {{ guestDetail.primaryGuest.lastName }}
          </div>
        </div>
        <div class="section--content--container">
          <div class="section--content--container--title">Phone No.</div>
          <div class="section--content--container--value">
            +{{ guestDetail.primaryGuest.nationality }} {{ guestDetail.primaryGuest.mobileNumber }}
          </div>
        </div>
        <div class="section--content--container">
          <div class="section--content--container--title">Email ID</div>
          <div class="section--content--container--value">
            {{ guestDetail.primaryGuest.email }}
          </div>
        </div>
      </div>
    </div>
    <div>
      <div class="section--heading">Stay Details</div>
      <div class="section--content">
        <div class="section--content--container">
          <div class="section--content--container--title">Arrival Date</div>
          <div class="section--content--container--value">
            {{ stayDetail.arrivalTime | date: 'dd - MM - yyyy' }}
          </div>
        </div>
        <div class="section--content--container">
          <div class="section--content--container--title">Departure Date</div>
          <div class="section--content--container--value">
            {{ stayDetail.departureTime | date: 'dd - MM - yyyy' }}
          </div>
        </div>
        <div class="section--content--container">
          <div class="section--content--container--title">Room Type</div>
          <div class="section--content--container--value">
            {{ stayDetail.roomType }}
          </div>
        </div>
        <div class="section--content--container">
          <div class="section--content--container--title">Travelling With</div>
          <div class="section--content--container--value--container">
            <div>Adults: {{ stayDetail.adultsCount }}</div>
            <div>Kids: {{ stayDetail.kidsCount }}</div>
          </div>
        </div>
      </div>
    </div>
    <div *ngIf="!headerSummary || (headerSummary && stepsStatus.guestDetails.primaryGuest.statusMessage.status !== 'PENDING')">
      <div class="section--heading">Documents</div>
      <div class="section--content">
        <div class="section--content--label">
          <ng-container [ngSwitch]="stepsStatus.guestDetails.primaryGuest.statusMessage.status">
            <ng-container *ngSwitchCase="'PENDING'">
              <div><mat-icon class="danger">{{ 'error_outline' }}</mat-icon></div>
              <div class="section--content--health--message-detail">Your documents are pending.</div>
            </ng-container>
            <ng-container *ngSwitchCase="'INITIATED'">
              <div><mat-icon class="warning">{{ 'error_outline' }}</mat-icon></div>
              <div class="section--content--health--message-detail">Your documents verification is initiated.</div>
            </ng-container>
            <ng-container *ngSwitchCase="'SUCCESS'">
              <div><mat-icon class="success">{{ 'check_circle_outline' }}</mat-icon></div>
              <div class="section--content--health--message-detail">Your documents are verified successfully.</div>
            </ng-container>
            <ng-container *ngSwitchCase="'FAILED'">
              <div><mat-icon class="danger">{{ 'error_outline' }}</mat-icon></div>
              <div class="section--content--health--message-detail">Your documents verification failed.</div>
            </ng-container>
          </ng-container>
        </div>
      </div>
      <div class="section--content" *ngIf="stepsStatus.guestDetails.primaryGuest.statusMessage.status === 'FAILED'">
        {{ stepsStatus.guestDetails.primaryGuest.statusMessage.remarks }}
      </div>
    </div>
    <div *ngIf="!headerSummary || (headerSummary && stepsStatus.healthDeclaration.statusMessage.status !== 'PENDING')">
      <div class="section--heading">Health Declaration Form</div>
      <div class="section--content--health">
        <div class="section--content--health--message">
          <ng-container [ngSwitch]="stepsStatus.healthDeclaration.statusMessage.status">
            <ng-container *ngSwitchCase="'PENDING'">
              <div><mat-icon class="danger">{{ 'error_outline' }}</mat-icon></div>
              <div class="section--content--health--message-detail">Health Decalaration form Pending.</div>
            </ng-container>
            <ng-container *ngSwitchCase="'INITIATED'">
              <div><mat-icon class="warning">{{ 'error_outline' }}</mat-icon></div>
              <div class="section--content--health--message-detail">Health Decalaration form Initiated.</div>
            </ng-container>
            <ng-container *ngSwitchCase="'SUCCESS'">
              <div><mat-icon class="success">{{ 'check_circle_outline' }}</mat-icon></div>
              <div class="section--content--health--message-detail">Health Decalaration form has been signed.</div>
            </ng-container>
            <ng-container *ngSwitchCase="'FAILED'">
              <div><mat-icon class="danger">{{ 'error_outline' }}</mat-icon></div>
              <div class="section--content--health--message-detail">Health Decalaration form verification failed.</div>
            </ng-container>
          </ng-container>
        </div>
        <div class="section--content" *ngIf="stepsStatus.healthDeclaration.statusMessage.status === 'FAILED'">
          {{ stepsStatus.healthDeclaration.statusMessage.remarks }}
        </div>
        <div class="section--content--health--disclaimer">Disclaimer: Health Declaration Form will be validated at Front Desk the time of Check-in. To ensure safety of all customers, Hotel holds the right to take appropriate action as per the outcome.</div>
      </div>
    </div>
    <div *ngIf="!headerSummary || (headerSummary && stepsStatus.paymentSummary.statusMessage.status !== 'PENDING')">
      <div class="section--heading">Payment Info</div>
      <div class="section--content">
        <div class="section--content--label">
          <ng-container [ngSwitch]="stepsStatus.paymentSummary.statusMessage.status">
            <ng-container *ngSwitchCase="'PENDING'">
              <div><mat-icon class="danger">{{ 'error_outline' }}</mat-icon></div>
              <div class="section--content--health--message-detail">Payment Pending.</div>
            </ng-container>
            <ng-container *ngSwitchCase="'INITIATED'">
              <div><mat-icon class="warning">{{ 'error_outline' }}</mat-icon></div>
              <div class="section--content--health--message-detail">Payment Initiated.</div>
            </ng-container>
            <ng-container *ngSwitchCase="'SUCCESS'">
              <div><mat-icon class="success">{{ 'check_circle_outline' }}</mat-icon></div>
              <div class="section--content--health--message-detail">Payment Success.</div>
            </ng-container>
            <ng-container *ngSwitchCase="'FAILED'">
              <div><mat-icon class="danger">{{ 'error_outline' }}</mat-icon></div>
              <div class="section--content--health--message-detail">Payment Failed.</div>
            </ng-container>
          </ng-container>
        </div>
        <div class="section--content--label">Amount to pay:&nbsp;<span>$3000</span></div>
      </div>
      <div class="section--content" *ngIf="stepsStatus.paymentSummary.statusMessage.status === 'FAILED'">
        {{ stepsStatus.paymentSummary.statusMessage.remarks }}
      </div>
    </div>
    <div *ngIf="!headerSummary">
      <div class="section--heading">Registration Card</div>
      <div class="section--content">
        <div class="section--content--label">
          <div><mat-icon [ngClass]="stepsStatus.guestDetails.primaryGuest.signatureUrl !== undefined
            ? 'success' : 'danger'">
            {{ stepsStatus.guestDetails.primaryGuest.signatureUrl !== undefined 
            ? 'check_circle_outline' : 'error_outline' }}</mat-icon></div>
          <div><label> Verify <span class="link" (click)="openRegCard()">Registration Card</span></label></div>
        </div>
      </div>
    </div>
  </div>
</ng-container>
